
---
class: inverse, center, middle

# Le cahier de laboratoire RMarkdown

<hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"></hr>

---

# C'est quoi le RMarkdown

.center[
![:scale 70%](assets/img/Rmarkdown.png)
]

- Un outil pour int√©grer du texte, du code et des r√©sultats
- Un format de fichier (`.Rmd`) pour cr√©er des documents dynamiques avec R
- Un paquet R

---
# Pourquoi RMarkdown?

- Documentation (dynamique) des analyses
- Facilite la partage/communication des r√©sultats
- Utilisable sur les syst√®mes de controle de version (Git)
- Reproductible!

---
# L'anatomie du RMarkdown

<br>
.center[
![:scale 90%](assets/img/Rmarkdown_anatomie.png)
]

---
# L'anatomie du RMarkdown

.center[
![](assets/img/Rmarkdown_example.png)
]

---
# L'anatomie du RMarkdown

.center[
![](assets/img/Rmarkdown_example2.png)
]

<span style="color:rgb(101, 136, 71);">Metadata</span> + <span style="color:rgb(255, 199, 65);">Texte</span> + <span style="color:rgb(100, 164, 213);">Code chunk</span> = RMarkdown

---
# Exercice

1. Ouvrir Rstudio
2. Installer le paquet RMarkdown si necessaire (`install.packages('Rmarkdown')`)
3. Creer nouveau document RMarkdown (bouton vert en haut √† gauche)
4. Identifier le YAML, texte, et code chunk du document `.Rmd`
5. Compiler le document en html (bouton üß∂ `knit`)

---
# Le YAML (metadata)

- les m√©tadonn√©es et les options du document sont d√©finies ici
- La syntaxe est `cle: value`
- Commence et se termine entre trois tirets `---`
- Toujours au d√©but du document

```r
---
title: "Mon titre"
author: "Willian Vieira"
date: "10/03/2021"
output: html_document
    toc: true
---
```

Les options d'output d√©pendent de la sortie.

Voir `?html_document`, `?pdf_document`, `?word_document`


---
# Markdown (contenu)

Plein texte avec une syntaxe minimaliste pour la mise en forme du texte

.font90[
.pull-left[
```md
# Titre 1
## Titre 2
### Titre 3

Ce mot est en *italique* et celui-ci
en **gras**.
Ici nous avons du `code`.
```
<br><br><br><br><br><br>
]


.pull-right[

# Titre 1
## Titre 2
### Titre 3

Ce mot est en *italique* et celui-ci
en **gras**.
Ici nous avons du `code`.
]
]

---
# Markdown - listes

.font90[
.pull-left[
```md
Le texte qui suit est une liste :
- Premier item
- Second item
- Troisi√®me item

Pour faire une √©num√©ration : 
1. Item 1
2. Item 2
3. Item 3
```
]

.pull-right[
Le texte qui suit est une liste :
- Premier item
- Second item
- Troisi√®me item

Pour faire une √©num√©ration : 
1. Item 1
2. Item 2
3. Item 3
]
]

---
# Markdown - images

```md
![Sch√©ma d'un projet de recherche](assets/img/flow_full_repro.png)
```

![Sch√©ma d'un projet de recherche](assets/img/flow_full_repro.png)

---
# Markdown - liens

```md
Voici le [lien](https://github.com/EcoNumUdS/BIO500) pour le GitHub du cours BIO500.
```

Voici le [lien](https://github.com/EcoNumUdS/BIO500) pour le GitHub du cours BIO500.


---
# Markdown - tables

.font90[
.pull-left[
```md
| Time          | Session | Topic    |
|:--------------|:-------:|---------:|
| _left_        | _center_| _right_  |
| 01:00 - 01:50 | 1       | Anatomy  |
| 01:50 - 02:00 |         | *Break*  |
| 02:00 - 02:45 | 2       | Tables   |
| 02:45 - 03:00 |         | *Break*  |
```
]

.pull-right[

| Time          | Session | Topic    |
|:--------------|:-------:|---------:|
| _left_        | _center_| _right_  |
| 01:00 - 01:50 | 1       | Anatomy  |
| 01:50 - 02:00 |         | *Break*  |
| 02:00 - 02:45 | 2       | Tables   |
| 02:45 - 03:00 |         | *Break*  |

]]

<br><br><br><br><br><br><br><br><br>
- Le `:` sp√©cifie l'alignement
- Possibilit√© d'utiliser des packages R sp√©cialis√©s pour imprimer des tableaux automatiquement √† partir de R (nous les verrons au dernier cours)



---
# Code chunk (script R)

L'utilit√© de Rmarkdown est de combiner du texte, du code et des images dans le m√™me document

### Code dans le document Rmarkdown :

.font80[
````md
Le code R doit √™tre √† l'int√©rieur d'un bloc de code (*code chunk*). Par example:

```{r}`r ''`
data(iris)
iris_setosa <- subset(iris, Species == 'setosa')
head(iris_setosa)
```
````
]

---
# Code chunk (script R)

### Sortie Rmarkdown une fois compil√© :

.font80[

```{r}
data(iris)
iris_setosa <- subset(iris, Species == 'setosa')
head(iris_setosa)
```
]

---
# Code chunk (script R)

.pull-left[
### :

.font80[
````md
```{r}`r ''`
data(iris)
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````
]]

.pull-right[
### Sortie:

.font80[
```{r}
data(iris)
plot(iris$Sepal.Length, iris$Sepal.Width)
```
]]

---
# Inclure du code directement dans un texte pour imprimer des valeurs

### Code Rmarkdown:

```{r,eval=FALSE}
le jeu de donn√©es *iris* comprend `r length(unique(iris$Species))` esp√®ces
avec un total de `r nrow(iris)` fleurs mesur√©es.
```

### Sortie:

le jeu de donn√©es *iris* comprend `r length(unique(iris$Species))` esp√®ces avec un total de `r nrow(iris)` fleurs mesur√©es.

---
# Configuration des code chunk

.font80[
Nommer le bloc de code (utile pour d√©bogage)
````md
```{r plot_iris}`r ''`
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````
`echo=FALSE`:  afficher les r√©sultats, mais pas le code
````md
```{r plot_iris, echo=FALSE}`r ''`
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````
`eval=FALSE`:  afficher le code, mais le code n'est pas √©valu√©
````md
```{r plot_iris, eval=FALSE}`r ''`
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````
`include=FALSE`: √©valuer le code, mais rien n'est affich√©
````md
```{r plot_iris, include=FALSE}`r ''`
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````
]

---
# Ajuster la taille de la figure

````md
```{r plot_iris, fig.height = 3, fig.width = 5, fig.align = "center"}`r ''`
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````

```{r plot_iris, echo=FALSE, fig.height = 4, fig.width = 6, fig.align = "center"}
plot(iris$Sepal.Length, iris$Sepal.Width)
```

---
# Configuration des code chunk

.font70[
```{r}
str(knitr::opts_chunk$get())
```
]


---
# L'univers RMarkdown

![Tutoriel](https://ulyngs.github.io/rmarkdown-workshop/slides/figures/rmarkdown_universe.jpg)

.font60[*Source: Ulrik Lyngs*]

---
# Autres ressources disponibles en ligne :

- R Markdown: The Definitive Guide [https://bookdown.org/yihui/rmarkdown/](https://bookdown.org/yihui/rmarkdown/)
- RMarkdown gallery [https://rmarkdown.rstudio.com/gallery.html](https://rmarkdown.rstudio.com/gallery.html)
- ResearchDown [https://insileco.github.io/ResearchDown/](https://insileco.github.io/ResearchDown/)

---
class: inverse, center, middle

# Travail pour la semaine

<hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"></hr>

---
