<!DOCTYPE html>
<html>
<head>
  <title>Séance 3: La gestion des données biologiques</title>
  <meta charset="utf-8">
  <meta name="description" content="Séance 3: La gestion des données biologiques">
  <meta name="author" content="Steve Vissault &amp; Dominique Gravel">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="./libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="./libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="./libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="./libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/default.css"></link>
<link rel=stylesheet href="./assets/css/ribbons.css"></link>
<link rel=stylesheet href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="./libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="./libraries/frameworks/io2012/js/slides" 
    src="./libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <aside class="gdbar">
    <img src="assets/img/logo.png">
  </aside>
  <hgroup class="auto-fadein">
    <h1>Séance 3: La gestion des données biologiques</h1>
    <h2>BIO 500 - Méthodes en écologie computationnelle</h2>
    <p>Steve Vissault &amp; Dominique Gravel<br/>Laboratoire d'écologie intégrative</p>
  </hgroup>
  <article></article>
  <footer class = 'license'>
    <a href='http://creativecommons.org/licenses/by-nc-sa/3.0/'>
    <img width = '80px' src = 'http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png'>
    </a>
  </footer>
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <!--  <a href="#slide-1"></a> -->
  <hgroup>
    <h1>Séance 3</h1>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Ces diapositives sont disponibles en <a href="https://econumuds.github.io/BIO500/cours3/">version web</a> et en <a href="./assets/pdf/S3-BIO500.pdf">PDF</a>.</li>
<li>L&#39;ensemble du matériel de cours est disponible sur la page du portail <a href="https://www.usherbrooke.ca/moodle2-cours/course/view.php?id=12189">moodle</a>.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-2" style="background:;">
  <!--  <a href="#slide-2"></a> -->
  <hgroup>
    <h1>Les grandes étapes</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li>Spécifier la connexion avec le serveur</li>
<li>Créer la base de données</li>
<li>Créer les tables et spécifier les clés</li>
<li>Ajouter de l&#39;information dans les tables</li>
<li>Faire des requêtes pour extraire l&#39;information</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-3" style="background:;">
  <!--  <a href="#slide-3"></a> -->
  <hgroup>
    <h1>Retour rapide sur la séance de la semaine dernière</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-4" style="background:;">
  <!--  <a href="#slide-4"></a> -->
  <hgroup>
    <h1>Connexion au serveur</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">library(RSQLite)

con &lt;- dbConnect(SQLite(),dbname=&quot;./assets/donnees/films.db&quot;)

tbl_films &lt;- &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee   integer,
    PRIMARY KEY (id_film)
);&quot;

dbSendQuery(con,tbl_films)
</code></pre>

<p><strong>Question:</strong> Sur ce script, où sont les instructions SQL? Òu sont les commandes R?</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-5" style="background:;">
  <!--  <a href="#slide-5"></a> -->
  <hgroup>
    <h1>Création de la table <code>films</code></h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">tbl_films &lt;- &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee   integer,
    PRIMARY KEY (id_film)
);&quot;

dbSendQuery(con,tbl_films)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-6" style="background:;">
  <!--  <a href="#slide-6"></a> -->
  <hgroup>
    <h1>Création de la table <code>acteurs</code></h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">tbl_acteurs &lt;- &quot;CREATE TABLE acteurs (
    id_acteur   integer,
    nom         varchar(100),
    prenom      varchar(100),
    id_film     integer,
    PRIMARY KEY (id_acteur),
    FOREIGN KEY (id_film) REFERENCES films (id_film) ON DELETE CASCADE
);&quot;

dbSendQuery(con,tbl_acteurs)
</code></pre>

<pre><code>## Warning: Closing open result set, pending rows
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-7" style="background:;">
  <!--  <a href="#slide-7"></a> -->
  <hgroup>
    <h1>Ajouter de l&#39;information dans les tables</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-8" style="background:;">
  <!--  <a href="#slide-8"></a> -->
  <hgroup>
    <h1>SQL - <code>INSERT</code></h1>
  </hgroup>
  <article data-timings="">
    <p>On veut maintenant insérer des données dans les tables <code>acteurs</code> et <code>films</code>.</p>

<h2>L&#39;instruction <code>INSERT</code> permet d&#39;insérer une ligne à la fois:</h2>

<pre><code class="sql">INSERT INTO films(id_film,titre,annee_prod) VALUES (1,&#39;la vie est belle&#39;,1997);
INSERT INTO acteurs(id_acteur,prenom,nom,id_film) VALUES(1,&#39;Nicoletta&#39;,&#39;Braschi&#39;,1);
INSERT INTO acteurs(id_acteur,prenom,nom,id_film) VALUES(2,&#39;Roberto&#39;,&#39;Benigni&#39;,1);
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-9" style="background:;">
  <!--  <a href="#slide-9"></a> -->
  <hgroup>
    <h1>SQL - <code>COPY ... FROM</code></h1>
  </hgroup>
  <article data-timings="">
    <p>L&#39;instruction SQL <code>COPY ... FROM</code> permet d&#39;insérer plusieurs lignes à la fois:</p>

<pre><code class="sql">COPY films FROM &#39;/Users/SteveVissault/Documents/Git/BIO500/cours4/pres/assets/donnees/bd_beacon/bd_films.csv&#39;
WITH FORMAT CSV HEADER DELIMITER &#39;;&#39;;
</code></pre>

<p>Documentation: <a href="http://docs.postgresql.fr/9.5/sql-copy.html">http://docs.postgresql.fr/9.5/sql-copy.html</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-10" style="background:;">
  <!--  <a href="#slide-10"></a> -->
  <hgroup>
    <h1>RSQLite - <code>dbWriteTable</code></h1>
  </hgroup>
  <article data-timings="">
    <p>La librairie RSQLite peut nous aider plus facilement à accomplir cette tâche:</p>

<pre><code class="r"># Lecture des fichiers CSV
bd_films &lt;- read.csv2(file=&#39;./assets/donnees/bd_beacon/bd_films.csv&#39;,stringsAsFactors=FALSE)
bd_acteurs &lt;- read.csv2(file=&#39;./assets/donnees/bd_beacon/bd_acteurs.csv&#39;,stringsAsFactors=FALSE)

# Injection des enregistrements dans la BD
dbWriteTable(con,append=TRUE,name=&quot;films&quot;,value=bd_films, row.names=FALSE)
</code></pre>

<pre><code>## Warning: Closing open result set, pending rows
</code></pre>

<pre><code class="r">dbWriteTable(con,append=TRUE,name=&quot;acteurs&quot;,value=bd_acteurs, row.names=FALSE)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-11" style="background:;">
  <!--  <a href="#slide-11"></a> -->
  <hgroup>
    <h1>Exercice 1 (10-15 minutes)</h1>
  </hgroup>
  <article data-timings="">
    <p>Ce premier exercice est important pour la suite de la séance.</p>

<ol>
<li>Recréer la base de données <code>bd_films</code> avec ses deux tables <code>films</code> et <code>acteurs</code></li>
<li>Insérer les données <a href="./assets/donnees/bd_beacon/bd_acteurs.csv">bd_acteurs.csv</a> et <a href="./assets/donnees/bd_beacon/bd_films.csv">bd_films.csv</a> dans les deux tables à l&#39;aide de la commande R <code>dbWriteTable()</code></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-12" style="background:;">
  <!--  <a href="#slide-12"></a> -->
  <hgroup>
    <h1>Les requêtes</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h1>Sélectionner des tables et des colonnes</h1>
  </hgroup>
  <article>
    <h2>La connexion est ouverte et toujours accessible depuis l&#39;objet <code>con</code>.</h2>

    <div class='left' style='float:left;width:48%'>
     <pre><code class="r">sql_requete &lt;- &quot;
SELECT id_film, titre, annee
  FROM films LIMIT 10
;&quot;

films &lt;- dbGetQuery(con,sql_requete)
head(films)
</code></pre>

<pre><code>##   id_film                  titre annee
## 1       1                ¡Átame!  1990
## 2       2         ¡Three Amigos!  1986
## 3       3 ...And Justice for All  1979
## 4       4       &#39;Breaker&#39; Morant  1980
## 5       5            &#39;burbs, The  1989
## 6       6  &#39;Crocodile&#39; Dundee II  1988
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <ul>
<li><code>SELECT</code> spécifie les colonnes.</li>
<li><code>FROM</code> spécifie la table.</li>
<li>On peut également ajouter une <code>LIMIT</code>.</li>
<li><a href="http://docs.postgresqlfr.org/9.5/sql-select.html">Documentation SQL Select</a>.</li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h1>Sélectionner des tables et des colonnes</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <pre><code class="r">sql_requete &lt;- &quot;SELECT * FROM films LIMIT 10;&quot;

films &lt;- dbGetQuery(con,sql_requete)
head(films)
</code></pre>

<pre><code>##   id_film                  titre annee
## 1       1                ¡Átame!  1990
## 2       2         ¡Three Amigos!  1986
## 3       3 ...And Justice for All  1979
## 4       4       &#39;Breaker&#39; Morant  1980
## 5       5            &#39;burbs, The  1989
## 6       6  &#39;Crocodile&#39; Dundee II  1988
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <ul>
<li><code>*</code> permet de ne pas spécifier une colonne en particulier.</li>
<li>Cette requête retournera toutes les colonnes de la table <code>films</code></li>
<li>Note: L&#39;instruction <code>LIMIT</code> est utilisée dans les prochaines diapos afin de permettre le rendu des requêtes sur une diapo.</li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h1>Sélectionner des enregistrements unique</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <pre><code class="r">sql_requete &lt;- &quot;SELECT DISTINCT nom, prenom
FROM acteurs LIMIT 10;&quot;

films &lt;- dbGetQuery(con,sql_requete)
head(films)
</code></pre>

<pre><code>##           nom    prenom
## 1 Fitz-Gerald     Lewis
## 2        Gage     Kevin
## 3    Carrasco    Carlos
## 4     Vasquez David (I)
## 5   Blackmore   Stephen
## 6    Anderson  Adam (I)
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <ul>
<li>L&#39;instruction <code>DISTINCT</code> permettra de retourner la combinaison unique de noms et prénoms présent dans la table acteurs.</li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h1>Ordonner la table</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <pre><code class="r">sql_requete &lt;- &quot;
SELECT titre, annee, id_film
  FROM films ORDER BY annee DESC
;&quot;
derniers_films &lt;- dbGetQuery(con,sql_requete)
head(derniers_films)
</code></pre>

<pre><code>##                  titre annee id_film
## 1               Breach  2007     708
## 2 Bridge to Terabithia  2007     727
## 3         Dead Silence  2007    1275
## 4           Epic Movie  2007    1573
## 5          Ghost Rider  2007    1946
## 6      Hannibal Rising  2007    2155
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <ul>
<li><code>ORDER BY</code> permet de trier par ordre croissant (<code>ASC</code>) ou décroissant (<code>DESC</code>).</li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h1>Critères avec <code>NULL</code></h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <pre><code class="r">sql_requete &lt;- &quot;
SELECT id_film, titre, annee
  FROM films WHERE annee IS NOT NULL
  ORDER BY annee DESC
;&quot;
annees_films &lt;- dbGetQuery(con,sql_requete)
head(annees_films)
</code></pre>

<pre><code>##   id_film                titre annee
## 1     708               Breach  2007
## 2     727 Bridge to Terabithia  2007
## 3    1275         Dead Silence  2007
## 4    1573           Epic Movie  2007
## 5    1946          Ghost Rider  2007
## 6    2155      Hannibal Rising  2007
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <ul>
<li><code>WHERE</code>, spécifie les critères de la requête.</li>
<li><code>annee_prod IS NULL</code> permet d&#39;obtenir seulement les films n&#39;ayant pas d&#39;année de production.</li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h1>Combiner les critères</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:55%'>
     <pre><code class="r">sql_requete &lt;- &quot;
SELECT id_film, titre, annee
  FROM films WHERE
  (annee &gt;= 1930 AND annee &lt;= 1940)
  OR (annee &gt;= 1950 AND annee &lt;= 1960)
  ORDER BY annee
;&quot;
derniers_films &lt;- dbGetQuery(con,sql_requete)
head(derniers_films)
</code></pre>

<pre><code>##   id_film                          titre annee
## 1     157 All Quiet on the Western Front  1930
## 2     239                Animal Crackers  1930
## 3     603               Blaue Engel, Der  1930
## 4     997                    City Lights  1931
## 5    1436                        Dracula  1931
## 6    1820                   Frankenstein  1931
</code></pre>

    </div>
    <div class='right' style='float:right;width:45%'>
     <ul>
<li>Multi-critères avec <code>AND</code> et <code>OR</code></li>
<li>Les parenthèses définissent les priorités d&#39;opérations.</li>
<li>Opérateurs de comparaison: <code>&gt;=</code>,<code>&lt;=</code>, <code>=</code> (Valeurs numériques)</li>
<li><a href="https://www.postgresql.org/docs/9.1/static/functions-comparison.html">Documentation sur les opérateurs de comparaisons</a></li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h1>Critères sur le texte avec <code>LIKE</code></h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:55%'>
     <pre><code class="r">sql_requete &lt;- &quot;
SELECT id_film, titre, annee
  FROM films WHERE titre LIKE &#39;%Voyage%&#39;
;&quot;
derniers_films &lt;- dbGetQuery(con,sql_requete)
head(derniers_films)
</code></pre>

<pre><code>##   id_film                         titre annee
## 1    1662              Fantastic Voyage  1966
## 2    3654                  Now, Voyager  1942
## 3    4770 Star Trek IV: The Voyage Home  1986
## 4    5330       Voyage dans la lune, Le  1902
</code></pre>

    </div>
    <div class='right' style='float:right;width:45%'>
     <ul>
<li>Rechercher dans le texte: <code>LIKE</code></li>
<li><code>%</code>: n&#39;importe quels caractères</li>
<li><code>_</code>: un seul caractère (exemple: <code>_1_</code> peut renvoyer <code>113</code> ou encore <code>A1C</code>)</li>
<li>Le critère contraire est aussi possible avec <code>NOT</code> (exemple: <code>WHERE titre NOT LIKE &#39;%voyage%&#39;</code>)</li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-20" style="background:;">
  <!--  <a href="#slide-20"></a> -->
  <hgroup>
    <h1>Exercice 2 (10 minutes)</h1>
  </hgroup>
  <article data-timings="">
    <p>Dans ta table <code>acteurs</code>, essayer de trouver votre acteur préféré avec <code>LIKE</code> ou avec <code>= &#39;votre_acteur_pref&#39;</code></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h1>Agréger l&#39;information (1 ligne)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <pre><code class="r">sql_requete &lt;- &quot;
SELECT avg(annee) AS moyenne,
  min(annee), max(annee)
  FROM films;&quot;

resume_films &lt;- dbGetQuery(con,sql_requete)
head(resume_films)
</code></pre>

<pre><code>##    moyenne min(annee) max(annee)
## 1 1989.853       1902       2007
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <ul>
<li>Pour faire une synthèse de l&#39;information sur une seule ligne.</li>
<li>Faire des opérations sur les champs numériques: <code>max</code>, <code>min</code>, <code>sum</code>, <code>avg</code>, <code>count</code>.</li>
<li>Mais aussi les opérations classiques: <code>*</code>, <code>/</code>, <code>-</code> etc.</li>
<li>Renommer les colonnes avec <code>AS</code>.</li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h1>Agréger l&#39;information (plusieurs lignes par groupe)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <pre><code class="r">sql_requete &lt;- &quot;
SELECT count(titre) AS nb_films, annee
  FROM films
  GROUP BY annee;&quot;

resume_films &lt;- dbGetQuery(con,sql_requete)
head(resume_films)
</code></pre>

<pre><code>##   nb_films annee
## 1     1278    NA
## 2        1  1902
## 3        1  1915
## 4        1  1916
## 5        1  1920
## 6        1  1921
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <ul>
<li><code>COUNT</code> permet de dénombrer le nombre de lignes.</li>
<li><code>GROUP BY</code> définit les champs sur lequel se fera l&#39;agrégation des données.</li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-23" style="background:;">
  <!--  <a href="#slide-23"></a> -->
  <hgroup>
    <h1>Exercice 3 (10 minutes)</h1>
  </hgroup>
  <article data-timings="">
    <p>À l&#39;aide de la base de données <code>bd_films</code>, dénombrer le nombre d&#39;acteurs par films</p>

<p>Quels sont les 10 acteurs les plus prolifiques?</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-24" style="background:;">
  <!--  <a href="#slide-24"></a> -->
  <hgroup>
    <h1>Jointures entre tables</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-25" style="background:;">
  <!--  <a href="#slide-25"></a> -->
  <hgroup>
    <h1>Jointures entre tables</h1>
  </hgroup>
  <article data-timings="">
    <p>Le <code>INNER JOIN</code> est un type de jointure, renvoyant seulement les films et les acteurs ayant un identifiant <code>id_film</code> commun.</p>

<pre><code class="r">sql_requete &lt;- &quot;
SELECT titre, annee, films.id_film, acteurs.id_film
  FROM films
  INNER JOIN acteurs ON films.id_film = acteurs.id_film
  ;&quot;

acteurs_films &lt;- dbGetQuery(con,sql_requete)
head(acteurs_films,4)
</code></pre>

<pre><code>##                     titre annee id_film id_film
## 1        &#39;Breaker&#39; Morant  1980       4       4
## 2             &#39;burbs, The  1989       5       5
## 3   &#39;Crocodile&#39; Dundee II  1988       6       6
## 4 *batteries not included  1987       7       7
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-26" style="background:;">
  <!--  <a href="#slide-26"></a> -->
  <hgroup>
    <h1>Les type de jointures</h1>
  </hgroup>
  <article data-timings="">
    <div style='text-align:center;margin-top:10px;'>
  <img src="assets/img/sql_joins.png" width="80%"></img>
</div>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-27" style="background:;">
  <!--  <a href="#slide-27"></a> -->
  <hgroup>
    <h1>Jointures entre tables</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut spécifier la jointure avec <code>USING</code> seulement si les deux clés possèdent le même nom.</p>

<pre><code class="r">sql_requete &lt;- &quot;
SELECT titre, annee, nom, prenom
  FROM films
  INNER JOIN acteurs USING (id_film)
  ;&quot;

acteurs_films &lt;- dbGetQuery(con,sql_requete)
head(acteurs_films,4)
</code></pre>

<pre><code>##                     titre annee         nom    prenom
## 1        &#39;Breaker&#39; Morant  1980 Fitz-Gerald     Lewis
## 2             &#39;burbs, The  1989        Gage     Kevin
## 3   &#39;Crocodile&#39; Dundee II  1988    Carrasco    Carlos
## 4 *batteries not included  1987     Vasquez David (I)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-28" style="background:;">
  <!--  <a href="#slide-28"></a> -->
  <hgroup>
    <h1>Exercice 4 (10-15 minutes)</h1>
  </hgroup>
  <article data-timings="">
    <h2>Combien il y a d&#39;acteurs par film depuis les 10 dernières années?</h2>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-29" style="background:;">
  <!--  <a href="#slide-29"></a> -->
  <hgroup>
    <h1>Exercice 5 (10-15 minutes)</h1>
  </hgroup>
  <article data-timings="">
    <h2>Quel film possède le plus d&#39;acteurs?</h2>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-30" style="background:;">
  <!--  <a href="#slide-30"></a> -->
  <hgroup>
    <h1>Exercice 6 (10-15 minutes)</h1>
  </hgroup>
  <article data-timings="">
    <h2>Existe-t-il un film sans acteurs?</h2>

<p>En vous servant des types de jointures, on voudrait savoir s&#39;il existe des films sans acteurs.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-31" style="background:;">
  <hgroup>
    <h1>Requêtes emboitées</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:55%'>
     <pre><code class="r">sql_requete &lt;- &quot;
SELECT annee, avg(nb_acteurs) AS moy_acteurs FROM (
  SELECT titre, annee, count(nom) AS nb_acteurs
    FROM films
    INNER JOIN acteurs USING (id_film)
    GROUP BY annee, titre
) AS nb_acteurs_film
GROUP BY annee;&quot;

moy_acteurs &lt;- dbGetQuery(con,sql_requete)
head(moy_acteurs)
</code></pre>

<pre><code>##   annee moy_acteurs
## 1    NA     25.2723
## 2  1902      9.0000
## 3  1915     55.0000
## 4  1916     59.0000
## 5  1920     11.0000
## 6  1921     59.0000
</code></pre>

    </div>
    <div class='right' style='float:right;width:45%'>
     <ul>
<li><p>On s&#39;interroge sur le nombre moyen d&#39;acteurs par années.</p></li>
<li><p>Pour ce faire, on peut bâtir une requête à partir d&#39;une autre requête.</p></li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-32" style="background:;">
  <hgroup>
    <h1>Filtrer les requêtes à posteriori</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:55%'>
     <pre><code class="r">sql_requete &lt;- &quot;
SELECT annee, avg(nb_acteurs) AS moy_acteurs FROM (
  SELECT titre, annee, count(nom) AS nb_acteurs
    FROM films
    INNER JOIN acteurs USING (id_film)
    GROUP BY annee, titre
) AS nb_acteurs_film
GROUP BY annee
HAVING avg(nb_acteurs) &gt; 10;&quot;

nb_acteurs &lt;- dbGetQuery(con,sql_requete)
head(nb_acteurs)
</code></pre>

<pre><code>##   annee moy_acteurs
## 1    NA     25.2723
## 2  1915     55.0000
## 3  1916     59.0000
## 4  1920     11.0000
## 5  1921     59.0000
## 6  1922     17.0000
</code></pre>

    </div>
    <div class='right' style='float:right;width:45%'>
     <ul>
<li>Il est possible de filtrer à posteriori sur la requête avec <code>HAVING</code>.</li>
</ul>

    </div>
  </article>
</slide>
<slide class="transition" id="slide-33" style="background:;">
  <!--  <a href="#slide-33"></a> -->
  <hgroup>
    <h1>Sauvegarder les requêtes</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-34" style="background:;">
  <!--  <a href="#slide-34"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Nous avons vu précédemment <code>COPY ... FROM chemin_vers_fichier</code> pour insérer des enregistrements dans les tables.</p>

<p>Il existe aussi l&#39;instruction <code>COPY ... TO chemin_vers_fichier</code> pour sauvegarder une requête.</p>

<pre><code class="sql">COPY (SELECT * FROM films WHERE titre LIKE &#39;A%&#39;)
TO &#39;/home/etudiant/Documents/films_A.csv&#39; WITH DELIMITER &#39;;&#39; CSV HEADER;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-35" style="background:;">
  <!--  <a href="#slide-35"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Afin de sauvegarder les requêtes obtenues dans R par <code>dbGetQuery()</code>, il est possible d&#39;utiliser les fonctions d&#39;écritures tels que <code>write.table()</code> ou encore <code>write.csv()</code>.</p>

<p>Il existe une façon de faire des requêtes dans <code>pgAdmin3</code> et d&#39;en sauvegarder les résultats grâce à l&#39;outils <code>Query</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-36" style="background:;">
  <!--  <a href="#slide-36"></a> -->
  <hgroup>
    <h1>Les requêtes stockées</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-37" style="background:;">
  <!--  <a href="#slide-37"></a> -->
  <hgroup>
    <h1>Les requêtes stockées: les vues</h1>
  </hgroup>
  <article data-timings="">
    <p>Les vues permettent de stocker directement les requêtes à l&#39;intérieur de la base de données afin d&#39;interroger la vue ultérieurement.</p>

<pre><code class="sql">CREATE VIEW moyenne_acteurs AS (
  SELECT annee_prod, avg(nb_acteurs) AS moy_acteurs FROM (
    SELECT titre, annee_prod, count(nom) AS nb_acteurs
      FROM films
      INNER JOIN acteurs USING (id_film)
      GROUP BY annee_prod, titre
  ) AS nb_acteurs_film
  GROUP BY annee_prod
  );
</code></pre>

<p>Il sera possible d&#39;atteindre cette vue plus tard avec:</p>

<pre><code class="sql">SELECT * FROM moyenne_acteurs;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-38" style="background:;">
  <!--  <a href="#slide-38"></a> -->
  <hgroup>
    <h1>Manipuler les enregistrements</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-39" style="background:;">
  <!--  <a href="#slide-39"></a> -->
  <hgroup>
    <h1>Mettre à jour des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut mettre à jour des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">UPDATE films SET genre = &#39;Dramatique&#39; WHERE genre = &#39;Drame&#39;;
</code></pre>

<p><strong>Note:</strong> On peut pas faire de modifications d&#39;enregistrements sur des vues, seulement sur les tables directement.</p>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-update.html">Documentation sur la commande UPDATE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-40" style="background:;">
  <!--  <a href="#slide-40"></a> -->
  <hgroup>
    <h1>Supprimer des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut supprimer des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">DELETE FROM films WHERE genre &lt;&gt; &#39;Comédie musicale&#39;;
</code></pre>

<p>Ou sans critères, pour supprimer tous les enregistrements.</p>

<pre><code class="sql">DELETE FROM films;
</code></pre>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-delete.html">Documentation sur la commande DELETE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-41" style="background:;">
  <!--  <a href="#slide-41"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-42" style="background:;">
  <!--  <a href="#slide-42"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Créer la base de données</p></li>
<li><p>Injecter les données</p></li>
<li><p>Faire les requêtes suivantes :</p>

<ul>
<li>Nombre de liens par étudiant</li>
<li>Décompte de liens par paire d&#39;étudiants</li>
</ul></li>
<li><p>Enregistrer le résultat des requêtes</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-43" style="background:;">
  <!--  <a href="#slide-43"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>En post-traitement sur R :</p>

<ul>
<li>Calculer le nombre d&#39;étudiants, le nombre de liens et la connectance du réseau</li>
<li>Calculer le nombre de liens moyens par étudiant et la variance</li>
</ul></li>
<li><p>Écrire un script qui réalise les étapes 1-3 d&#39;un bloc</p></li>
</ol>

<p>Vous devez remettre les 5 scripts pour chacune de ces étapes ainsi que le script final qui les exécute l&#39;une après l&#39;autre. Assurez vous que le script fonctionne sur la machine virtuelle et entre des utilisateurs différents.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-44" style="background:;">
  <!--  <a href="#slide-44"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <h2>Débat sur le partage des données</h2>

<ul>
<li>Poisot et al. 2014. Moving toward a sustainable ecological science: don&#39;t let data go to waste ! Ideas in Ecology and Evolution 6: 11-19</li>
<li>Mills et al. 2015. Archivin Primary Data: Solutions for Long-term Studies. Trends in Ecology and Evolution.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-45" style="background:;">
  <!--  <a href="#slide-45"></a> -->
  <hgroup>
    <h1>Découper les scripts avec R</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-46" style="background:;">
  <hgroup>
    <h1>Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Script 1 - Créer et interroger la BD</h2>

<pre><code class="r"># Création des tables
dbSendQuery(con, &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee_prod   integer,
    PRIMARY KEY (id_film)
);&quot;)

# On lit le fichier à insérer
---.transition

# Sauvegarder les requêtes
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     
    </div>
  </article>
</slide>
<slide class="" id="slide-47" style="background:;">
  <!--  <a href="#slide-47"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Nous avons vu précédemment <code>COPY ... FROM chemin_vers_fichier</code> pour insérer des enregistrements dans les tables.</p>

<p>Il existe aussi l&#39;instruction <code>COPY ... TO chemin_vers_fichier</code> pour sauvegarder une requête.</p>

<pre><code class="sql">COPY (SELECT * FROM films WHERE titre LIKE &#39;A%&#39;)
TO &#39;/home/etudiant/Documents/films_A.csv&#39; WITH DELIMITER &#39;;&#39; CSV HEADER;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-48" style="background:;">
  <!--  <a href="#slide-48"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Afin de sauvegarder les requêtes obtenues dans R par <code>dbGetQuery()</code>, il est possible d&#39;utiliser les fonctions d&#39;écritures tels que <code>write.table()</code> ou encore <code>write.csv()</code>.</p>

<p>Il existe une façon de faire des requêtes dans <code>pgAdmin3</code> et d&#39;en sauvegarder les résultats grâce à l&#39;outils <code>Query</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-49" style="background:;">
  <!--  <a href="#slide-49"></a> -->
  <hgroup>
    <h1>Les requêtes stockées</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-50" style="background:;">
  <!--  <a href="#slide-50"></a> -->
  <hgroup>
    <h1>Les requêtes stockées: les vues</h1>
  </hgroup>
  <article data-timings="">
    <p>Les vues permettent de stocker directement les requêtes à l&#39;intérieur de la base de données afin d&#39;interroger la vue ultérieurement.</p>

<pre><code class="sql">CREATE VIEW moyenne_acteurs AS (
  SELECT annee_prod, avg(nb_acteurs) AS moy_acteurs FROM (
    SELECT titre, annee_prod, count(nom) AS nb_acteurs
      FROM films
      INNER JOIN acteurs USING (id_film)
      GROUP BY annee_prod, titre
  ) AS nb_acteurs_film
  GROUP BY annee_prod
  );
</code></pre>

<p>Il sera possible d&#39;atteindre cette vue plus tard avec:</p>

<pre><code class="sql">SELECT * FROM moyenne_acteurs;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-51" style="background:;">
  <!--  <a href="#slide-51"></a> -->
  <hgroup>
    <h1>Manipuler les enregistrements</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-52" style="background:;">
  <!--  <a href="#slide-52"></a> -->
  <hgroup>
    <h1>Mettre à jour des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut mettre à jour des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">UPDATE films SET genre = &#39;Dramatique&#39; WHERE genre = &#39;Drame&#39;;
</code></pre>

<p><strong>Note:</strong> On peut pas faire de modifications d&#39;enregistrements sur des vues, seulement sur les tables directement.</p>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-update.html">Documentation sur la commande UPDATE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-53" style="background:;">
  <!--  <a href="#slide-53"></a> -->
  <hgroup>
    <h1>Supprimer des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut supprimer des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">DELETE FROM films WHERE genre &lt;&gt; &#39;Comédie musicale&#39;;
</code></pre>

<p>Ou sans critères, pour supprimer tous les enregistrements.</p>

<pre><code class="sql">DELETE FROM films;
</code></pre>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-delete.html">Documentation sur la commande DELETE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-54" style="background:;">
  <!--  <a href="#slide-54"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-55" style="background:;">
  <!--  <a href="#slide-55"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Créer la base de données</p></li>
<li><p>Injecter les données</p></li>
<li><p>Faire les requêtes suivantes :</p>

<ul>
<li>Nombre de liens par étudiant</li>
<li>Décompte de liens par paire d&#39;étudiants</li>
</ul></li>
<li><p>Enregistrer le résultat des requêtes</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-56" style="background:;">
  <!--  <a href="#slide-56"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>En post-traitement sur R :</p>

<ul>
<li>Calculer le nombre d&#39;étudiants, le nombre de liens et la connectance du réseau</li>
<li>Calculer le nombre de liens moyens par étudiant et la variance</li>
</ul></li>
<li><p>Écrire un script qui réalise les étapes 1-3 d&#39;un bloc</p></li>
</ol>

<p>Vous devez remettre les 5 scripts pour chacune de ces étapes ainsi que le script final qui les exécute l&#39;une après l&#39;autre. Assurez vous que le script fonctionne sur la machine virtuelle et entre des utilisateurs différents.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-57" style="background:;">
  <!--  <a href="#slide-57"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <h2>Débat sur le partage des données</h2>

<ul>
<li>Poisot et al. 2014. Moving toward a sustainable ecological science: don&#39;t let data go to waste ! Ideas in Ecology and Evolution 6: 11-19</li>
<li>Mills et al. 2015. Archivin Primary Data: Solutions for Long-term Studies. Trends in Ecology and Evolution.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-58" style="background:;">
  <!--  <a href="#slide-58"></a> -->
  <hgroup>
    <h1>Découper les scripts avec R</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-59" style="background:;">
  <hgroup>
    <h1>Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Script 1 - Créer et interroger la BD</h2>

<pre><code class="r"># Création des tables
dbSendQuery(con, &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee_prod   integer,
    PRIMARY KEY (id_film)
);&quot;)

# On lit le fichier à insérer
bd_films &lt;- read.csv2(file=&#39;./assets/donnees/
                      bd_beacon/bd_films.csv&#39;)

# On écrit dans la table
---.transition

# Sauvegarder les requêtes
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     
    </div>
  </article>
</slide>
<slide class="" id="slide-60" style="background:;">
  <!--  <a href="#slide-60"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Nous avons vu précédemment <code>COPY ... FROM chemin_vers_fichier</code> pour insérer des enregistrements dans les tables.</p>

<p>Il existe aussi l&#39;instruction <code>COPY ... TO chemin_vers_fichier</code> pour sauvegarder une requête.</p>

<pre><code class="sql">COPY (SELECT * FROM films WHERE titre LIKE &#39;A%&#39;)
TO &#39;/home/etudiant/Documents/films_A.csv&#39; WITH DELIMITER &#39;;&#39; CSV HEADER;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-61" style="background:;">
  <!--  <a href="#slide-61"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Afin de sauvegarder les requêtes obtenues dans R par <code>dbGetQuery()</code>, il est possible d&#39;utiliser les fonctions d&#39;écritures tels que <code>write.table()</code> ou encore <code>write.csv()</code>.</p>

<p>Il existe une façon de faire des requêtes dans <code>pgAdmin3</code> et d&#39;en sauvegarder les résultats grâce à l&#39;outils <code>Query</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-62" style="background:;">
  <!--  <a href="#slide-62"></a> -->
  <hgroup>
    <h1>Les requêtes stockées</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-63" style="background:;">
  <!--  <a href="#slide-63"></a> -->
  <hgroup>
    <h1>Les requêtes stockées: les vues</h1>
  </hgroup>
  <article data-timings="">
    <p>Les vues permettent de stocker directement les requêtes à l&#39;intérieur de la base de données afin d&#39;interroger la vue ultérieurement.</p>

<pre><code class="sql">CREATE VIEW moyenne_acteurs AS (
  SELECT annee_prod, avg(nb_acteurs) AS moy_acteurs FROM (
    SELECT titre, annee_prod, count(nom) AS nb_acteurs
      FROM films
      INNER JOIN acteurs USING (id_film)
      GROUP BY annee_prod, titre
  ) AS nb_acteurs_film
  GROUP BY annee_prod
  );
</code></pre>

<p>Il sera possible d&#39;atteindre cette vue plus tard avec:</p>

<pre><code class="sql">SELECT * FROM moyenne_acteurs;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-64" style="background:;">
  <!--  <a href="#slide-64"></a> -->
  <hgroup>
    <h1>Manipuler les enregistrements</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-65" style="background:;">
  <!--  <a href="#slide-65"></a> -->
  <hgroup>
    <h1>Mettre à jour des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut mettre à jour des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">UPDATE films SET genre = &#39;Dramatique&#39; WHERE genre = &#39;Drame&#39;;
</code></pre>

<p><strong>Note:</strong> On peut pas faire de modifications d&#39;enregistrements sur des vues, seulement sur les tables directement.</p>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-update.html">Documentation sur la commande UPDATE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-66" style="background:;">
  <!--  <a href="#slide-66"></a> -->
  <hgroup>
    <h1>Supprimer des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut supprimer des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">DELETE FROM films WHERE genre &lt;&gt; &#39;Comédie musicale&#39;;
</code></pre>

<p>Ou sans critères, pour supprimer tous les enregistrements.</p>

<pre><code class="sql">DELETE FROM films;
</code></pre>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-delete.html">Documentation sur la commande DELETE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-67" style="background:;">
  <!--  <a href="#slide-67"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-68" style="background:;">
  <!--  <a href="#slide-68"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Créer la base de données</p></li>
<li><p>Injecter les données</p></li>
<li><p>Faire les requêtes suivantes :</p>

<ul>
<li>Nombre de liens par étudiant</li>
<li>Décompte de liens par paire d&#39;étudiants</li>
</ul></li>
<li><p>Enregistrer le résultat des requêtes</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-69" style="background:;">
  <!--  <a href="#slide-69"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>En post-traitement sur R :</p>

<ul>
<li>Calculer le nombre d&#39;étudiants, le nombre de liens et la connectance du réseau</li>
<li>Calculer le nombre de liens moyens par étudiant et la variance</li>
</ul></li>
<li><p>Écrire un script qui réalise les étapes 1-3 d&#39;un bloc</p></li>
</ol>

<p>Vous devez remettre les 5 scripts pour chacune de ces étapes ainsi que le script final qui les exécute l&#39;une après l&#39;autre. Assurez vous que le script fonctionne sur la machine virtuelle et entre des utilisateurs différents.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-70" style="background:;">
  <!--  <a href="#slide-70"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <h2>Débat sur le partage des données</h2>

<ul>
<li>Poisot et al. 2014. Moving toward a sustainable ecological science: don&#39;t let data go to waste ! Ideas in Ecology and Evolution 6: 11-19</li>
<li>Mills et al. 2015. Archivin Primary Data: Solutions for Long-term Studies. Trends in Ecology and Evolution.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-71" style="background:;">
  <!--  <a href="#slide-71"></a> -->
  <hgroup>
    <h1>Découper les scripts avec R</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-72" style="background:;">
  <hgroup>
    <h1>Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Script 1 - Créer et interroger la BD</h2>

<pre><code class="r"># Création des tables
dbSendQuery(con, &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee_prod   integer,
    PRIMARY KEY (id_film)
---.transition

# Sauvegarder les requêtes
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     
    </div>
  </article>
</slide>
<slide class="" id="slide-73" style="background:;">
  <!--  <a href="#slide-73"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Nous avons vu précédemment <code>COPY ... FROM chemin_vers_fichier</code> pour insérer des enregistrements dans les tables.</p>

<p>Il existe aussi l&#39;instruction <code>COPY ... TO chemin_vers_fichier</code> pour sauvegarder une requête.</p>

<pre><code class="sql">COPY (SELECT * FROM films WHERE titre LIKE &#39;A%&#39;)
TO &#39;/home/etudiant/Documents/films_A.csv&#39; WITH DELIMITER &#39;;&#39; CSV HEADER;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-74" style="background:;">
  <!--  <a href="#slide-74"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Afin de sauvegarder les requêtes obtenues dans R par <code>dbGetQuery()</code>, il est possible d&#39;utiliser les fonctions d&#39;écritures tels que <code>write.table()</code> ou encore <code>write.csv()</code>.</p>

<p>Il existe une façon de faire des requêtes dans <code>pgAdmin3</code> et d&#39;en sauvegarder les résultats grâce à l&#39;outils <code>Query</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-75" style="background:;">
  <!--  <a href="#slide-75"></a> -->
  <hgroup>
    <h1>Les requêtes stockées</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-76" style="background:;">
  <!--  <a href="#slide-76"></a> -->
  <hgroup>
    <h1>Les requêtes stockées: les vues</h1>
  </hgroup>
  <article data-timings="">
    <p>Les vues permettent de stocker directement les requêtes à l&#39;intérieur de la base de données afin d&#39;interroger la vue ultérieurement.</p>

<pre><code class="sql">CREATE VIEW moyenne_acteurs AS (
  SELECT annee_prod, avg(nb_acteurs) AS moy_acteurs FROM (
    SELECT titre, annee_prod, count(nom) AS nb_acteurs
      FROM films
      INNER JOIN acteurs USING (id_film)
      GROUP BY annee_prod, titre
  ) AS nb_acteurs_film
  GROUP BY annee_prod
  );
</code></pre>

<p>Il sera possible d&#39;atteindre cette vue plus tard avec:</p>

<pre><code class="sql">SELECT * FROM moyenne_acteurs;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-77" style="background:;">
  <!--  <a href="#slide-77"></a> -->
  <hgroup>
    <h1>Manipuler les enregistrements</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-78" style="background:;">
  <!--  <a href="#slide-78"></a> -->
  <hgroup>
    <h1>Mettre à jour des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut mettre à jour des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">UPDATE films SET genre = &#39;Dramatique&#39; WHERE genre = &#39;Drame&#39;;
</code></pre>

<p><strong>Note:</strong> On peut pas faire de modifications d&#39;enregistrements sur des vues, seulement sur les tables directement.</p>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-update.html">Documentation sur la commande UPDATE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-79" style="background:;">
  <!--  <a href="#slide-79"></a> -->
  <hgroup>
    <h1>Supprimer des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut supprimer des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">DELETE FROM films WHERE genre &lt;&gt; &#39;Comédie musicale&#39;;
</code></pre>

<p>Ou sans critères, pour supprimer tous les enregistrements.</p>

<pre><code class="sql">DELETE FROM films;
</code></pre>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-delete.html">Documentation sur la commande DELETE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-80" style="background:;">
  <!--  <a href="#slide-80"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-81" style="background:;">
  <!--  <a href="#slide-81"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Créer la base de données</p></li>
<li><p>Injecter les données</p></li>
<li><p>Faire les requêtes suivantes :</p>

<ul>
<li>Nombre de liens par étudiant</li>
<li>Décompte de liens par paire d&#39;étudiants</li>
</ul></li>
<li><p>Enregistrer le résultat des requêtes</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-82" style="background:;">
  <!--  <a href="#slide-82"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>En post-traitement sur R :</p>

<ul>
<li>Calculer le nombre d&#39;étudiants, le nombre de liens et la connectance du réseau</li>
<li>Calculer le nombre de liens moyens par étudiant et la variance</li>
</ul></li>
<li><p>Écrire un script qui réalise les étapes 1-3 d&#39;un bloc</p></li>
</ol>

<p>Vous devez remettre les 5 scripts pour chacune de ces étapes ainsi que le script final qui les exécute l&#39;une après l&#39;autre. Assurez vous que le script fonctionne sur la machine virtuelle et entre des utilisateurs différents.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-83" style="background:;">
  <!--  <a href="#slide-83"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <h2>Débat sur le partage des données</h2>

<ul>
<li>Poisot et al. 2014. Moving toward a sustainable ecological science: don&#39;t let data go to waste ! Ideas in Ecology and Evolution 6: 11-19</li>
<li>Mills et al. 2015. Archivin Primary Data: Solutions for Long-term Studies. Trends in Ecology and Evolution.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-84" style="background:;">
  <!--  <a href="#slide-84"></a> -->
  <hgroup>
    <h1>Sauvegarder les requêtes</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-85" style="background:;">
  <!--  <a href="#slide-85"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Nous avons vu précédemment <code>COPY ... FROM chemin_vers_fichier</code> pour insérer des enregistrements dans les tables.</p>

<p>Il existe aussi l&#39;instruction <code>COPY ... TO chemin_vers_fichier</code> pour sauvegarder une requête.</p>

<pre><code class="sql">COPY (SELECT * FROM films WHERE titre LIKE &#39;A%&#39;)
TO &#39;/home/etudiant/Documents/films_A.csv&#39; WITH DELIMITER &#39;;&#39; CSV HEADER;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-86" style="background:;">
  <!--  <a href="#slide-86"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Afin de sauvegarder les requêtes obtenues dans R par <code>dbGetQuery()</code>, il est possible d&#39;utiliser les fonctions d&#39;écritures tels que <code>write.table()</code> ou encore <code>write.csv()</code>.</p>

<p>Il existe une façon de faire des requêtes dans <code>pgAdmin3</code> et d&#39;en sauvegarder les résultats grâce à l&#39;outils <code>Query</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-87" style="background:;">
  <!--  <a href="#slide-87"></a> -->
  <hgroup>
    <h1>Les requêtes stockées</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-88" style="background:;">
  <!--  <a href="#slide-88"></a> -->
  <hgroup>
    <h1>Les requêtes stockées: les vues</h1>
  </hgroup>
  <article data-timings="">
    <p>Les vues permettent de stocker directement les requêtes à l&#39;intérieur de la base de données afin d&#39;interroger la vue ultérieurement.</p>

<pre><code class="sql">CREATE VIEW moyenne_acteurs AS (
  SELECT annee_prod, avg(nb_acteurs) AS moy_acteurs FROM (
    SELECT titre, annee_prod, count(nom) AS nb_acteurs
      FROM films
      INNER JOIN acteurs USING (id_film)
      GROUP BY annee_prod, titre
  ) AS nb_acteurs_film
  GROUP BY annee_prod
  );
</code></pre>

<p>Il sera possible d&#39;atteindre cette vue plus tard avec:</p>

<pre><code class="sql">SELECT * FROM moyenne_acteurs;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-89" style="background:;">
  <!--  <a href="#slide-89"></a> -->
  <hgroup>
    <h1>Manipuler les enregistrements</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-90" style="background:;">
  <!--  <a href="#slide-90"></a> -->
  <hgroup>
    <h1>Mettre à jour des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut mettre à jour des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">UPDATE films SET genre = &#39;Dramatique&#39; WHERE genre = &#39;Drame&#39;;
</code></pre>

<p><strong>Note:</strong> On peut pas faire de modifications d&#39;enregistrements sur des vues, seulement sur les tables directement.</p>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-update.html">Documentation sur la commande UPDATE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-91" style="background:;">
  <!--  <a href="#slide-91"></a> -->
  <hgroup>
    <h1>Supprimer des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut supprimer des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">DELETE FROM films WHERE genre &lt;&gt; &#39;Comédie musicale&#39;;
</code></pre>

<p>Ou sans critères, pour supprimer tous les enregistrements.</p>

<pre><code class="sql">DELETE FROM films;
</code></pre>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-delete.html">Documentation sur la commande DELETE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-92" style="background:;">
  <!--  <a href="#slide-92"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-93" style="background:;">
  <!--  <a href="#slide-93"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Créer la base de données</p></li>
<li><p>Injecter les données</p></li>
<li><p>Faire les requêtes suivantes :</p>

<ul>
<li>Nombre de liens par étudiant</li>
<li>Décompte de liens par paire d&#39;étudiants</li>
</ul></li>
<li><p>Enregistrer le résultat des requêtes</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-94" style="background:;">
  <!--  <a href="#slide-94"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>En post-traitement sur R :</p>

<ul>
<li>Calculer le nombre d&#39;étudiants, le nombre de liens et la connectance du réseau</li>
<li>Calculer le nombre de liens moyens par étudiant et la variance</li>
</ul></li>
<li><p>Écrire un script qui réalise les étapes 1-3 d&#39;un bloc</p></li>
</ol>

<p>Vous devez remettre les 5 scripts pour chacune de ces étapes ainsi que le script final qui les exécute l&#39;une après l&#39;autre. Assurez vous que le script fonctionne sur la machine virtuelle et entre des utilisateurs différents.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-95" style="background:;">
  <!--  <a href="#slide-95"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <h2>Débat sur le partage des données</h2>

<ul>
<li>Poisot et al. 2014. Moving toward a sustainable ecological science: don&#39;t let data go to waste ! Ideas in Ecology and Evolution 6: 11-19</li>
<li>Mills et al. 2015. Archivin Primary Data: Solutions for Long-term Studies. Trends in Ecology and Evolution.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-96" style="background:;">
  <!--  <a href="#slide-96"></a> -->
  <hgroup>
    <h1>Découper les scripts avec R</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-97" style="background:;">
  <hgroup>
    <h1>Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Script 1 - Créer et interroger la BD</h2>

<pre><code class="r"># Création des tables
dbSendQuery(con, &quot;CREATE TABLE films (
    id_film     integer,
---.transition

# Sauvegarder les requêtes
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     
    </div>
  </article>
</slide>
<slide class="" id="slide-98" style="background:;">
  <!--  <a href="#slide-98"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Nous avons vu précédemment <code>COPY ... FROM chemin_vers_fichier</code> pour insérer des enregistrements dans les tables.</p>

<p>Il existe aussi l&#39;instruction <code>COPY ... TO chemin_vers_fichier</code> pour sauvegarder une requête.</p>

<pre><code class="sql">COPY (SELECT * FROM films WHERE titre LIKE &#39;A%&#39;)
TO &#39;/home/etudiant/Documents/films_A.csv&#39; WITH DELIMITER &#39;;&#39; CSV HEADER;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-99" style="background:;">
  <!--  <a href="#slide-99"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Afin de sauvegarder les requêtes obtenues dans R par <code>dbGetQuery()</code>, il est possible d&#39;utiliser les fonctions d&#39;écritures tels que <code>write.table()</code> ou encore <code>write.csv()</code>.</p>

<p>Il existe une façon de faire des requêtes dans <code>pgAdmin3</code> et d&#39;en sauvegarder les résultats grâce à l&#39;outils <code>Query</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-100" style="background:;">
  <!--  <a href="#slide-100"></a> -->
  <hgroup>
    <h1>Les requêtes stockées</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-101" style="background:;">
  <!--  <a href="#slide-101"></a> -->
  <hgroup>
    <h1>Les requêtes stockées: les vues</h1>
  </hgroup>
  <article data-timings="">
    <p>Les vues permettent de stocker directement les requêtes à l&#39;intérieur de la base de données afin d&#39;interroger la vue ultérieurement.</p>

<pre><code class="sql">CREATE VIEW moyenne_acteurs AS (
  SELECT annee_prod, avg(nb_acteurs) AS moy_acteurs FROM (
    SELECT titre, annee_prod, count(nom) AS nb_acteurs
      FROM films
      INNER JOIN acteurs USING (id_film)
      GROUP BY annee_prod, titre
  ) AS nb_acteurs_film
  GROUP BY annee_prod
  );
</code></pre>

<p>Il sera possible d&#39;atteindre cette vue plus tard avec:</p>

<pre><code class="sql">SELECT * FROM moyenne_acteurs;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-102" style="background:;">
  <!--  <a href="#slide-102"></a> -->
  <hgroup>
    <h1>Manipuler les enregistrements</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-103" style="background:;">
  <!--  <a href="#slide-103"></a> -->
  <hgroup>
    <h1>Mettre à jour des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut mettre à jour des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">UPDATE films SET genre = &#39;Dramatique&#39; WHERE genre = &#39;Drame&#39;;
</code></pre>

<p><strong>Note:</strong> On peut pas faire de modifications d&#39;enregistrements sur des vues, seulement sur les tables directement.</p>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-update.html">Documentation sur la commande UPDATE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-104" style="background:;">
  <!--  <a href="#slide-104"></a> -->
  <hgroup>
    <h1>Supprimer des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut supprimer des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">DELETE FROM films WHERE genre &lt;&gt; &#39;Comédie musicale&#39;;
</code></pre>

<p>Ou sans critères, pour supprimer tous les enregistrements.</p>

<pre><code class="sql">DELETE FROM films;
</code></pre>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-delete.html">Documentation sur la commande DELETE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-105" style="background:;">
  <!--  <a href="#slide-105"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-106" style="background:;">
  <!--  <a href="#slide-106"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Créer la base de données</p></li>
<li><p>Injecter les données</p></li>
<li><p>Faire les requêtes suivantes :</p>

<ul>
<li>Nombre de liens par étudiant</li>
<li>Décompte de liens par paire d&#39;étudiants</li>
</ul></li>
<li><p>Enregistrer le résultat des requêtes</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-107" style="background:;">
  <!--  <a href="#slide-107"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>En post-traitement sur R :</p>

<ul>
<li>Calculer le nombre d&#39;étudiants, le nombre de liens et la connectance du réseau</li>
<li>Calculer le nombre de liens moyens par étudiant et la variance</li>
</ul></li>
<li><p>Écrire un script qui réalise les étapes 1-3 d&#39;un bloc</p></li>
</ol>

<p>Vous devez remettre les 5 scripts pour chacune de ces étapes ainsi que le script final qui les exécute l&#39;une après l&#39;autre. Assurez vous que le script fonctionne sur la machine virtuelle et entre des utilisateurs différents.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-108" style="background:;">
  <!--  <a href="#slide-108"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <h2>Débat sur le partage des données</h2>

<ul>
<li>Poisot et al. 2014. Moving toward a sustainable ecological science: don&#39;t let data go to waste ! Ideas in Ecology and Evolution 6: 11-19</li>
<li>Mills et al. 2015. Archivin Primary Data: Solutions for Long-term Studies. Trends in Ecology and Evolution.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-109" style="background:;">
  <!--  <a href="#slide-109"></a> -->
  <hgroup>
    <h1>Découper les scripts avec R</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-110" style="background:;">
  <hgroup>
    <h1>Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Script 1 - Créer et interroger la BD</h2>

<pre><code class="r"># Création des tables
dbSendQuery(con, &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee_prod   integer,
    PRIMARY KEY (id_film)
);&quot;)

# On lit le fichier à insérer
bd_films &lt;- read.csv2(file=&#39;./assets/donnees/
                      bd_beacon/bd_films.csv&#39;)
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     
    </div>
  </article>
</slide>
<slide class="transition" id="slide-111" style="background:;">
  <!--  <a href="#slide-111"></a> -->
  <hgroup>
    <h1>Sauvegarder les requêtes</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-112" style="background:;">
  <!--  <a href="#slide-112"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Nous avons vu précédemment <code>COPY ... FROM chemin_vers_fichier</code> pour insérer des enregistrements dans les tables.</p>

<p>Il existe aussi l&#39;instruction <code>COPY ... TO chemin_vers_fichier</code> pour sauvegarder une requête.</p>

<pre><code class="sql">COPY (SELECT * FROM films WHERE titre LIKE &#39;A%&#39;)
TO &#39;/home/etudiant/Documents/films_A.csv&#39; WITH DELIMITER &#39;;&#39; CSV HEADER;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-113" style="background:;">
  <!--  <a href="#slide-113"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Afin de sauvegarder les requêtes obtenues dans R par <code>dbGetQuery()</code>, il est possible d&#39;utiliser les fonctions d&#39;écritures tels que <code>write.table()</code> ou encore <code>write.csv()</code>.</p>

<p>Il existe une façon de faire des requêtes dans <code>pgAdmin3</code> et d&#39;en sauvegarder les résultats grâce à l&#39;outils <code>Query</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-114" style="background:;">
  <!--  <a href="#slide-114"></a> -->
  <hgroup>
    <h1>Les requêtes stockées</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-115" style="background:;">
  <!--  <a href="#slide-115"></a> -->
  <hgroup>
    <h1>Les requêtes stockées: les vues</h1>
  </hgroup>
  <article data-timings="">
    <p>Les vues permettent de stocker directement les requêtes à l&#39;intérieur de la base de données afin d&#39;interroger la vue ultérieurement.</p>

<pre><code class="sql">CREATE VIEW moyenne_acteurs AS (
  SELECT annee_prod, avg(nb_acteurs) AS moy_acteurs FROM (
    SELECT titre, annee_prod, count(nom) AS nb_acteurs
      FROM films
      INNER JOIN acteurs USING (id_film)
      GROUP BY annee_prod, titre
  ) AS nb_acteurs_film
  GROUP BY annee_prod
  );
</code></pre>

<p>Il sera possible d&#39;atteindre cette vue plus tard avec:</p>

<pre><code class="sql">SELECT * FROM moyenne_acteurs;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-116" style="background:;">
  <!--  <a href="#slide-116"></a> -->
  <hgroup>
    <h1>Manipuler les enregistrements</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-117" style="background:;">
  <!--  <a href="#slide-117"></a> -->
  <hgroup>
    <h1>Mettre à jour des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut mettre à jour des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">UPDATE films SET genre = &#39;Dramatique&#39; WHERE genre = &#39;Drame&#39;;
</code></pre>

<p><strong>Note:</strong> On peut pas faire de modifications d&#39;enregistrements sur des vues, seulement sur les tables directement.</p>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-update.html">Documentation sur la commande UPDATE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-118" style="background:;">
  <!--  <a href="#slide-118"></a> -->
  <hgroup>
    <h1>Supprimer des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut supprimer des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">DELETE FROM films WHERE genre &lt;&gt; &#39;Comédie musicale&#39;;
</code></pre>

<p>Ou sans critères, pour supprimer tous les enregistrements.</p>

<pre><code class="sql">DELETE FROM films;
</code></pre>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-delete.html">Documentation sur la commande DELETE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-119" style="background:;">
  <!--  <a href="#slide-119"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-120" style="background:;">
  <!--  <a href="#slide-120"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Créer la base de données</p></li>
<li><p>Injecter les données</p></li>
<li><p>Faire les requêtes suivantes :</p>

<ul>
<li>Nombre de liens par étudiant</li>
<li>Décompte de liens par paire d&#39;étudiants</li>
</ul></li>
<li><p>Enregistrer le résultat des requêtes</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-121" style="background:;">
  <!--  <a href="#slide-121"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>En post-traitement sur R :</p>

<ul>
<li>Calculer le nombre d&#39;étudiants, le nombre de liens et la connectance du réseau</li>
<li>Calculer le nombre de liens moyens par étudiant et la variance</li>
</ul></li>
<li><p>Écrire un script qui réalise les étapes 1-3 d&#39;un bloc</p></li>
</ol>

<p>Vous devez remettre les 5 scripts pour chacune de ces étapes ainsi que le script final qui les exécute l&#39;une après l&#39;autre. Assurez vous que le script fonctionne sur la machine virtuelle et entre des utilisateurs différents.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-122" style="background:;">
  <!--  <a href="#slide-122"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <h2>Débat sur le partage des données</h2>

<ul>
<li>Poisot et al. 2014. Moving toward a sustainable ecological science: don&#39;t let data go to waste ! Ideas in Ecology and Evolution 6: 11-19</li>
<li>Mills et al. 2015. Archivin Primary Data: Solutions for Long-term Studies. Trends in Ecology and Evolution.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-123" style="background:;">
  <!--  <a href="#slide-123"></a> -->
  <hgroup>
    <h1>Découper les scripts avec R</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-124" style="background:;">
  <hgroup>
    <h1>Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Script 1 - Créer et interroger la BD</h2>

<pre><code class="r">---.transition

# Sauvegarder les requêtes
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     
    </div>
  </article>
</slide>
<slide class="" id="slide-125" style="background:;">
  <!--  <a href="#slide-125"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Nous avons vu précédemment <code>COPY ... FROM chemin_vers_fichier</code> pour insérer des enregistrements dans les tables.</p>

<p>Il existe aussi l&#39;instruction <code>COPY ... TO chemin_vers_fichier</code> pour sauvegarder une requête.</p>

<pre><code class="sql">COPY (SELECT * FROM films WHERE titre LIKE &#39;A%&#39;)
TO &#39;/home/etudiant/Documents/films_A.csv&#39; WITH DELIMITER &#39;;&#39; CSV HEADER;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-126" style="background:;">
  <!--  <a href="#slide-126"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Afin de sauvegarder les requêtes obtenues dans R par <code>dbGetQuery()</code>, il est possible d&#39;utiliser les fonctions d&#39;écritures tels que <code>write.table()</code> ou encore <code>write.csv()</code>.</p>

<p>Il existe une façon de faire des requêtes dans <code>pgAdmin3</code> et d&#39;en sauvegarder les résultats grâce à l&#39;outils <code>Query</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-127" style="background:;">
  <!--  <a href="#slide-127"></a> -->
  <hgroup>
    <h1>Les requêtes stockées</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-128" style="background:;">
  <!--  <a href="#slide-128"></a> -->
  <hgroup>
    <h1>Les requêtes stockées: les vues</h1>
  </hgroup>
  <article data-timings="">
    <p>Les vues permettent de stocker directement les requêtes à l&#39;intérieur de la base de données afin d&#39;interroger la vue ultérieurement.</p>

<pre><code class="sql">CREATE VIEW moyenne_acteurs AS (
  SELECT annee_prod, avg(nb_acteurs) AS moy_acteurs FROM (
    SELECT titre, annee_prod, count(nom) AS nb_acteurs
      FROM films
      INNER JOIN acteurs USING (id_film)
      GROUP BY annee_prod, titre
  ) AS nb_acteurs_film
  GROUP BY annee_prod
  );
</code></pre>

<p>Il sera possible d&#39;atteindre cette vue plus tard avec:</p>

<pre><code class="sql">SELECT * FROM moyenne_acteurs;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-129" style="background:;">
  <!--  <a href="#slide-129"></a> -->
  <hgroup>
    <h1>Manipuler les enregistrements</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-130" style="background:;">
  <!--  <a href="#slide-130"></a> -->
  <hgroup>
    <h1>Mettre à jour des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut mettre à jour des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">UPDATE films SET genre = &#39;Dramatique&#39; WHERE genre = &#39;Drame&#39;;
</code></pre>

<p><strong>Note:</strong> On peut pas faire de modifications d&#39;enregistrements sur des vues, seulement sur les tables directement.</p>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-update.html">Documentation sur la commande UPDATE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-131" style="background:;">
  <!--  <a href="#slide-131"></a> -->
  <hgroup>
    <h1>Supprimer des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut supprimer des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">DELETE FROM films WHERE genre &lt;&gt; &#39;Comédie musicale&#39;;
</code></pre>

<p>Ou sans critères, pour supprimer tous les enregistrements.</p>

<pre><code class="sql">DELETE FROM films;
</code></pre>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-delete.html">Documentation sur la commande DELETE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-132" style="background:;">
  <!--  <a href="#slide-132"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-133" style="background:;">
  <!--  <a href="#slide-133"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Créer la base de données</p></li>
<li><p>Injecter les données</p></li>
<li><p>Faire les requêtes suivantes :</p>

<ul>
<li>Nombre de liens par étudiant</li>
<li>Décompte de liens par paire d&#39;étudiants</li>
</ul></li>
<li><p>Enregistrer le résultat des requêtes</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-134" style="background:;">
  <!--  <a href="#slide-134"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>En post-traitement sur R :</p>

<ul>
<li>Calculer le nombre d&#39;étudiants, le nombre de liens et la connectance du réseau</li>
<li>Calculer le nombre de liens moyens par étudiant et la variance</li>
</ul></li>
<li><p>Écrire un script qui réalise les étapes 1-3 d&#39;un bloc</p></li>
</ol>

<p>Vous devez remettre les 5 scripts pour chacune de ces étapes ainsi que le script final qui les exécute l&#39;une après l&#39;autre. Assurez vous que le script fonctionne sur la machine virtuelle et entre des utilisateurs différents.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-135" style="background:;">
  <!--  <a href="#slide-135"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <h2>Débat sur le partage des données</h2>

<ul>
<li>Poisot et al. 2014. Moving toward a sustainable ecological science: don&#39;t let data go to waste ! Ideas in Ecology and Evolution 6: 11-19</li>
<li>Mills et al. 2015. Archivin Primary Data: Solutions for Long-term Studies. Trends in Ecology and Evolution.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-136" style="background:;">
  <!--  <a href="#slide-136"></a> -->
  <hgroup>
    <h1>Découper les scripts avec R</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-137" style="background:;">
  <hgroup>
    <h1>Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Script 1 - Créer et interroger la BD</h2>

<pre><code class="r"># Création des tables
dbSendQuery(con, &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee_prod   integer,
    PRIMARY KEY (id_film)
);&quot;)

# On lit le fichier à insérer
bd_films &lt;- read.csv2(file=&#39;./asse
---.transition

# Sauvegarder les requêtes
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     
    </div>
  </article>
</slide>
<slide class="" id="slide-138" style="background:;">
  <!--  <a href="#slide-138"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Nous avons vu précédemment <code>COPY ... FROM chemin_vers_fichier</code> pour insérer des enregistrements dans les tables.</p>

<p>Il existe aussi l&#39;instruction <code>COPY ... TO chemin_vers_fichier</code> pour sauvegarder une requête.</p>

<pre><code class="sql">COPY (SELECT * FROM films WHERE titre LIKE &#39;A%&#39;)
TO &#39;/home/etudiant/Documents/films_A.csv&#39; WITH DELIMITER &#39;;&#39; CSV HEADER;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-139" style="background:;">
  <!--  <a href="#slide-139"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Afin de sauvegarder les requêtes obtenues dans R par <code>dbGetQuery()</code>, il est possible d&#39;utiliser les fonctions d&#39;écritures tels que <code>write.table()</code> ou encore <code>write.csv()</code>.</p>

<p>Il existe une façon de faire des requêtes dans <code>pgAdmin3</code> et d&#39;en sauvegarder les résultats grâce à l&#39;outils <code>Query</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-140" style="background:;">
  <!--  <a href="#slide-140"></a> -->
  <hgroup>
    <h1>Les requêtes stockées</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-141" style="background:;">
  <!--  <a href="#slide-141"></a> -->
  <hgroup>
    <h1>Les requêtes stockées: les vues</h1>
  </hgroup>
  <article data-timings="">
    <p>Les vues permettent de stocker directement les requêtes à l&#39;intérieur de la base de données afin d&#39;interroger la vue ultérieurement.</p>

<pre><code class="sql">CREATE VIEW moyenne_acteurs AS (
  SELECT annee_prod, avg(nb_acteurs) AS moy_acteurs FROM (
    SELECT titre, annee_prod, count(nom) AS nb_acteurs
      FROM films
      INNER JOIN acteurs USING (id_film)
      GROUP BY annee_prod, titre
  ) AS nb_acteurs_film
  GROUP BY annee_prod
  );
</code></pre>

<p>Il sera possible d&#39;atteindre cette vue plus tard avec:</p>

<pre><code class="sql">SELECT * FROM moyenne_acteurs;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-142" style="background:;">
  <!--  <a href="#slide-142"></a> -->
  <hgroup>
    <h1>Manipuler les enregistrements</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-143" style="background:;">
  <!--  <a href="#slide-143"></a> -->
  <hgroup>
    <h1>Mettre à jour des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut mettre à jour des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">UPDATE films SET genre = &#39;Dramatique&#39; WHERE genre = &#39;Drame&#39;;
</code></pre>

<p><strong>Note:</strong> On peut pas faire de modifications d&#39;enregistrements sur des vues, seulement sur les tables directement.</p>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-update.html">Documentation sur la commande UPDATE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-144" style="background:;">
  <!--  <a href="#slide-144"></a> -->
  <hgroup>
    <h1>Supprimer des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut supprimer des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">DELETE FROM films WHERE genre &lt;&gt; &#39;Comédie musicale&#39;;
</code></pre>

<p>Ou sans critères, pour supprimer tous les enregistrements.</p>

<pre><code class="sql">DELETE FROM films;
</code></pre>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-delete.html">Documentation sur la commande DELETE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-145" style="background:;">
  <!--  <a href="#slide-145"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-146" style="background:;">
  <!--  <a href="#slide-146"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Créer la base de données</p></li>
<li><p>Injecter les données</p></li>
<li><p>Faire les requêtes suivantes :</p>

<ul>
<li>Nombre de liens par étudiant</li>
<li>Décompte de liens par paire d&#39;étudiants</li>
</ul></li>
<li><p>Enregistrer le résultat des requêtes</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-147" style="background:;">
  <!--  <a href="#slide-147"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li>En post-traitement sur R :

<ul>
<li>Calculer le nombre d&#39;étudiants, le nombre de liens et la connectance du réseau</li>
<li>Calculer le nombre de liens mo
---.transition</li>
</ul></li>
</ol>

<h1>Sauvegarder les requêtes</h1>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-148" style="background:;">
  <!--  <a href="#slide-148"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Nous avons vu précédemment <code>COPY ... FROM chemin_vers_fichier</code> pour insérer des enregistrements dans les tables.</p>

<p>Il existe aussi l&#39;instruction <code>COPY ... TO chemin_vers_fichier</code> pour sauvegarder une requête.</p>

<pre><code class="sql">COPY (SELECT * FROM films WHERE titre LIKE &#39;A%&#39;)
TO &#39;/home/etudiant/Documents/films_A.csv&#39; WITH DELIMITER &#39;;&#39; CSV HEADER;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-149" style="background:;">
  <!--  <a href="#slide-149"></a> -->
  <hgroup>
    <h1>Sauvegarder une requête</h1>
  </hgroup>
  <article data-timings="">
    <p>Afin de sauvegarder les requêtes obtenues dans R par <code>dbGetQuery()</code>, il est possible d&#39;utiliser les fonctions d&#39;écritures tels que <code>write.table()</code> ou encore <code>write.csv()</code>.</p>

<p>Il existe une façon de faire des requêtes dans <code>pgAdmin3</code> et d&#39;en sauvegarder les résultats grâce à l&#39;outils <code>Query</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-150" style="background:;">
  <!--  <a href="#slide-150"></a> -->
  <hgroup>
    <h1>Les requêtes stockées</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-151" style="background:;">
  <!--  <a href="#slide-151"></a> -->
  <hgroup>
    <h1>Les requêtes stockées: les vues</h1>
  </hgroup>
  <article data-timings="">
    <p>Les vues permettent de stocker directement les requêtes à l&#39;intérieur de la base de données afin d&#39;interroger la vue ultérieurement.</p>

<pre><code class="sql">CREATE VIEW moyenne_acteurs AS (
  SELECT annee_prod, avg(nb_acteurs) AS moy_acteurs FROM (
    SELECT titre, annee_prod, count(nom) AS nb_acteurs
      FROM films
      INNER JOIN acteurs USING (id_film)
      GROUP BY annee_prod, titre
  ) AS nb_acteurs_film
  GROUP BY annee_prod
  );
</code></pre>

<p>Il sera possible d&#39;atteindre cette vue plus tard avec:</p>

<pre><code class="sql">SELECT * FROM moyenne_acteurs;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-152" style="background:;">
  <!--  <a href="#slide-152"></a> -->
  <hgroup>
    <h1>Manipuler les enregistrements</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-153" style="background:;">
  <!--  <a href="#slide-153"></a> -->
  <hgroup>
    <h1>Mettre à jour des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut mettre à jour des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">UPDATE films SET genre = &#39;Dramatique&#39; WHERE genre = &#39;Drame&#39;;
</code></pre>

<p><strong>Note:</strong> On peut pas faire de modifications d&#39;enregistrements sur des vues, seulement sur les tables directement.</p>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-update.html">Documentation sur la commande UPDATE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-154" style="background:;">
  <!--  <a href="#slide-154"></a> -->
  <hgroup>
    <h1>Supprimer des enregistrements</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut supprimer des enregistrements d&#39;une table avec des critères spécifiques.</p>

<pre><code class="sql">DELETE FROM films WHERE genre &lt;&gt; &#39;Comédie musicale&#39;;
</code></pre>

<p>Ou sans critères, pour supprimer tous les enregistrements.</p>

<pre><code class="sql">DELETE FROM films;
</code></pre>

<p><a href="http://docs.postgresqlfr.org/8.3/sql-delete.html">Documentation sur la commande DELETE</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-155" style="background:;">
  <!--  <a href="#slide-155"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-156" style="background:;">
  <!--  <a href="#slide-156"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Créer la base de données</p></li>
<li><p>Injecter les données</p></li>
<li><p>Faire les requêtes suivantes :</p>

<ul>
<li>Nombre de liens par étudiant</li>
<li>Décompte de liens par paire d&#39;étudiants</li>
</ul></li>
<li><p>Enregistrer le résultat des requêtes</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-157" style="background:;">
  <!--  <a href="#slide-157"></a> -->
  <hgroup>
    <h1>Travail de la semaine</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>En post-traitement sur R :</p>

<ul>
<li>Calculer le nombre d&#39;étudiants, le nombre de liens et la connectance du réseau</li>
<li>Calculer le nombre de liens moyens par étudiant et la variance</li>
</ul></li>
<li><p>Écrire un script qui réalise les étapes 1-3 d&#39;un bloc</p></li>
</ol>

<p>Vous devez remettre les 5 scripts pour chacune de ces étapes ainsi que le script final qui les exécute l&#39;une après l&#39;autre. Assurez vous que le script fonctionne sur la machine virtuelle et entre des utilisateurs différents.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-158" style="background:;">
  <!--  <a href="#slide-158"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <h2>Débat sur le partage des données</h2>

<ul>
<li>Poisot et al. 2014. Moving toward a sustainable ecological science: don&#39;t let data go to waste ! Ideas in Ecology and Evolution 6: 11-19</li>
<li>Mills et al. 2015. Archivin Primary Data: Solutions for Long-term Studies. Trends in Ecology and Evolution.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-159" style="background:;">
  <!--  <a href="#slide-159"></a> -->
  <hgroup>
    <h1>Découper les scripts avec R</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-160" style="background:;">
  <hgroup>
    <h1>Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Script 1 - Créer et interroger la BD</h2>

<pre><code class="r"># Création des tables
dbSendQuery(con, &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee_prod   integer,
    PRIMARY KEY (id_film)
);&quot;)

# On lit le fichier à insérer
bd_films &lt;- read.csv2(file=&#39;./assets/donnees/
                      bd_beacon/bd_films.csv&#39;)

# On écrit dans la table
dbWriteTable(con,append=TRUE,name=&quot;films&quot;,
            value=bd_films, row.names=FALSE)

# On fait une Requête
annees &lt;- dbGetQuery(con,&quot;SELECT DISTINCT
                  annee_prod FROM films;&quot;)
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <h2>Script 2 - Analyse des données</h2>

<pre><code class="r"># On appelle le script 1
source(&#39;/chemin/vers/script1/scrip1.R&#39;)

# Lister les objets R dans l&#39;environnement
ls()

# On verra apparaitre l&#39;objet &#39;annees&#39;
# que l&#39;on pourra utiliser
# pour la suite du maketravail
</code></pre>

    </div>
  </article>
</slide>
<slide class="transition" id="slide-161" style="background:;">
  <!--  <a href="#slide-161"></a> -->
  <hgroup>
    <h1>Discussionyens par étudiant et la variance</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li>Écrire un script qui réalise les étapes 1-3 d&#39;un bloc</li>
</ol>

<p>Vous devez remettre les 5 scripts pour chacune de ces étapes ainsi que le script final qui les exécute l&#39;une après l&#39;autre. Assurez vous que le script fonctionne sur la machine virtuelle et entre des utilisateurs différents.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-162" style="background:;">
  <!--  <a href="#slide-162"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <h2>Débat sur le partage des données</h2>

<ul>
<li>Poisot et al. 2014. Moving toward a sustainable ecological science: don&#39;t let data go to waste ! Ideas in Ecology and Evolution 6: 11-19</li>
<li>Mills et al. 2015. Archivin Primary Data: Solutions for Long-term Studies. Trends in Ecology and Evolution.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-163" style="background:;">
  <!--  <a href="#slide-163"></a> -->
  <hgroup>
    <h1>Découper les scripts avec R</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-164" style="background:;">
  <hgroup>
    <h1>Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Script 1 - Créer et interroger la BD</h2>

<pre><code class="r"># Création des tables
dbSendQuery(con, &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee_prod   integer,
    PRIMARY KEY (id_film)
);&quot;)

# On lit le fichier à insérer
bd_films &lt;- read.csv2(file=&#39;./assets/donnees/
                      bd_beacon/bd_films.csv&#39;)

# On écrit dans la table
dbWriteTable(con,append=TRUE,name=&quot;films&quot;,
            value=bd_films, row.names=FALSE)

# On fait une Requête
annees &lt;- dbGetQuery(con,&quot;SELECT DISTINCT
                  annee_prod FROM films;&quot;)
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <h2>Script 2 - Analyse des données</h2>

<pre><code class="r"># On appelle le script 1
source(&#39;/chemin/vers/script1/scrip1.R&#39;)

# Lister les objets R dans l&#39;environnement
ls()

# On verra apparaitre l&#39;objet &#39;annees&#39;
# que l&#39;on pourra utiliser
# pour la suite du maketravail
</code></pre>

    </div>
  </article>
</slide>
<slide class="transition" id="slide-165" style="background:;">
  <!--  <a href="#slide-165"></a> -->
  <hgroup>
    <h1>Discussionts/donnees/</h1>
  </hgroup>
  <article data-timings="">
    <pre><code>                  bd_beacon/bd_films.csv&#39;)
</code></pre>

<h1>On écrit dans la table</h1>

<p>dbWriteTable(con,append=TRUE,name=&quot;films&quot;,
            value=bd_films, row.names=FALSE)</p>

<h1>On fait une Requête</h1>

<p>annees &lt;- dbGetQuery(con,&quot;SELECT DISTINCT
                  annee_prod FROM films;&quot;)</p>

<pre><code></code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-166" style="background:;">
  <!--  <a href="#slide-166"></a> -->
  <hgroup>
    <h1>Discussion</h1>
  </hgroup>
  <article data-timings="">
    <h1>Création des tables</h1>

<p>dbSendQuery(con, &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee_prod   integer,
    PRIMARY KEY (id_film)
);&quot;)</p>

<h1>On lit le fichier à insérer</h1>

<p>bd_films &lt;- read.csv2(file=&#39;./assets/donnees/
                      bd_beacon/bd_films.csv&#39;)</p>

<h1>On écrit dans la table</h1>

<p>dbWriteTable(con,append=TRUE,name=&quot;films&quot;,
            value=bd_films, row.names=FALSE)</p>

<h1>On fait une Requête</h1>

<p>annees &lt;- dbGetQuery(con,&quot;SELECT DISTINCT
                  annee_prod FROM films;&quot;)</p>

<pre><code></code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-167" style="background:;">
  <!--  <a href="#slide-167"></a> -->
  <hgroup>
    <h1>Discussion</h1>
  </hgroup>
  <article data-timings="">
    <h1>On écrit dans la table</h1>

<p>dbWriteTable(con,append=TRUE,name=&quot;films&quot;,
            value=bd_films, row.names=FALSE)</p>

<h1>On fait une Requête</h1>

<p>annees &lt;- dbGetQuery(con,&quot;SELECT DISTINCT
                  annee_prod FROM films;&quot;)</p>

<pre><code></code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-168" style="background:;">
  <!--  <a href="#slide-168"></a> -->
  <hgroup>
    <h1>Discussion</h1>
  </hgroup>
  <article data-timings="">
    <pre><code>titre       varchar(300),
annee_prod   integer,
PRIMARY KEY (id_film)
</code></pre>

<p>);&quot;)</p>

<h1>On lit le fichier à insérer</h1>

<p>bd_films &lt;- read.csv2(file=&#39;./assets/donnees/
                      bd_beacon/bd_films.csv&#39;)</p>

<h1>On écrit dans la table</h1>

<p>dbWriteTable(con,append=TRUE,name=&quot;films&quot;,
            value=bd_films, row.names=FALSE)</p>

<h1>On fait une Requête</h1>

<p>annees &lt;- dbGetQuery(con,&quot;SELECT DISTINCT
                  annee_prod FROM films;&quot;)</p>

<pre><code></code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-169" style="background:;">
  <!--  <a href="#slide-169"></a> -->
  <hgroup>
    <h1>Discussion</h1>
  </hgroup>
  <article data-timings="">
    <p>---.transition</p>

<h1>Découper les scripts avec R</h1>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-170" style="background:;">
  <hgroup>
    <h1>Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Script 1 - Créer et interroger la BD</h2>

<pre><code class="r"># Création des tables
dbSendQuery(con, &quot;CREATE TABLE films (
    id_film     integer,
    titre       varchar(300),
    annee_prod   integer,
    PRIMARY KEY (id_film)
);&quot;)

# On lit le fichier à insérer
bd_films &lt;- read.csv2(file=&#39;./assets/donnees/
                      bd_beacon/bd_films.csv&#39;)

# On écrit dans la table
dbWriteTable(con,append=TRUE,name=&quot;films&quot;,
            value=bd_films, row.names=FALSE)

# On fait une Requête
annees &lt;- dbGetQuery(con,&quot;SELECT DISTINCT
                  annee_prod FROM films;&quot;)
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <h2>Script 2 - Analyse des données</h2>

<pre><code class="r"># On appelle le script 1
source(&#39;/chemin/vers/script1/scrip1.R&#39;)

# Lister les objets R dans l&#39;environnement
ls()

# On verra apparaitre l&#39;objet &#39;annees&#39;
# que l&#39;on pourra utiliser
# pour la suite du maketravail
</code></pre>

    </div>
  </article>
</slide>
<slide class="transition" id="slide-171" style="background:;">
  <!--  <a href="#slide-171"></a> -->
  <hgroup>
    <h1>Discussion</h1>
  </hgroup>
  <article data-timings="">
    <p>);&quot;)</p>

<h1>On lit le fichier à insérer</h1>

<p>bd_films &lt;- read.csv2(file=&#39;./assets/donnees/
                      bd_beacon/bd_films.csv&#39;)</p>

<h1>On écrit dans la table</h1>

<p>dbWriteTable(con,append=TRUE,name=&quot;films&quot;,
            value=bd_films, row.names=FALSE)</p>

<h1>On fait une Requête</h1>

<p>annees &lt;- dbGetQuery(con,&quot;SELECT DISTINCT
                  annee_prod FROM films;&quot;)</p>

<pre><code></code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-172" style="background:;">
  <!--  <a href="#slide-172"></a> -->
  <hgroup>
    <h1>Discussion</h1>
  </hgroup>
  <article data-timings="">
    <p>dbWriteTable(con,append=TRUE,name=&quot;films&quot;,
            value=bd_films, row.names=FALSE)</p>

<h1>On fait une Requête</h1>

<p>annees &lt;- dbGetQuery(con,&quot;SELECT DISTINCT
                  annee_prod FROM films;&quot;)</p>

<pre><code></code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-173" style="background:;">
  <!--  <a href="#slide-173"></a> -->
  <hgroup>
    <h1>Discussion</h1>
  </hgroup>
  <article data-timings="">
    <p>bd_films &lt;- read.csv2(file=&#39;./assets/donnees/
                      bd_beacon/bd_films.csv&#39;)</p>

<h1>On écrit dans la table</h1>

<p>dbWriteTable(con,append=TRUE,name=&quot;films&quot;,
            value=bd_films, row.names=FALSE)</p>

<h1>On fait une Requête</h1>

<p>annees &lt;- dbGetQuery(con,&quot;SELECT DISTINCT
                  annee_prod FROM films;&quot;)</p>

<pre><code></code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-174" style="background:;">
  <!--  <a href="#slide-174"></a> -->
  <hgroup>
    <h1>Discussion</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='Séance 3'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Les grandes étapes'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Retour rapide sur la séance de la semaine dernière'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Connexion au serveur'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Création de la table <code>films</code>'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Création de la table <code>acteurs</code>'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Ajouter de l&#39;information dans les tables'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='SQL - <code>INSERT</code>'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='SQL - <code>COPY ... FROM</code>'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='RSQLite - <code>dbWriteTable</code>'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Exercice 1 (10-15 minutes)'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Les requêtes'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Sélectionner des tables et des colonnes'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Sélectionner des tables et des colonnes'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Sélectionner des enregistrements unique'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Ordonner la table'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='Critères avec <code>NULL</code>'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='Combiner les critères'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='Critères sur le texte avec <code>LIKE</code>'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Exercice 2 (10 minutes)'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Agréger l&#39;information (1 ligne)'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='Agréger l&#39;information (plusieurs lignes par groupe)'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='Exercice 3 (10 minutes)'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='Jointures entre tables'>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='Jointures entre tables'>
         25
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='Les type de jointures'>
         26
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='Jointures entre tables'>
         27
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='Exercice 4 (10-15 minutes)'>
         28
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title='Exercice 5 (10-15 minutes)'>
         29
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='Exercice 6 (10-15 minutes)'>
         30
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='Requêtes emboitées'>
         31
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title='Filtrer les requêtes à posteriori'>
         32
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title='Sauvegarder les requêtes'>
         33
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title='Sauvegarder une requête'>
         34
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title='Sauvegarder une requête'>
         35
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='Les requêtes stockées'>
         36
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=37 title='Les requêtes stockées: les vues'>
         37
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=38 title='Manipuler les enregistrements'>
         38
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=39 title='Mettre à jour des enregistrements'>
         39
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=40 title='Supprimer des enregistrements'>
         40
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=41 title='Travail de la semaine'>
         41
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=42 title='Travail de la semaine'>
         42
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=43 title='Travail de la semaine'>
         43
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=44 title='Lectures'>
         44
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=45 title='Découper les scripts avec R'>
         45
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=46 title='Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)'>
         46
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=47 title='Sauvegarder une requête'>
         47
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=48 title='Sauvegarder une requête'>
         48
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=49 title='Les requêtes stockées'>
         49
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=50 title='Les requêtes stockées: les vues'>
         50
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=51 title='Manipuler les enregistrements'>
         51
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=52 title='Mettre à jour des enregistrements'>
         52
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=53 title='Supprimer des enregistrements'>
         53
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=54 title='Travail de la semaine'>
         54
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=55 title='Travail de la semaine'>
         55
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=56 title='Travail de la semaine'>
         56
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=57 title='Lectures'>
         57
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=58 title='Découper les scripts avec R'>
         58
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=59 title='Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)'>
         59
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=60 title='Sauvegarder une requête'>
         60
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=61 title='Sauvegarder une requête'>
         61
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=62 title='Les requêtes stockées'>
         62
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=63 title='Les requêtes stockées: les vues'>
         63
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=64 title='Manipuler les enregistrements'>
         64
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=65 title='Mettre à jour des enregistrements'>
         65
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=66 title='Supprimer des enregistrements'>
         66
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=67 title='Travail de la semaine'>
         67
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=68 title='Travail de la semaine'>
         68
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=69 title='Travail de la semaine'>
         69
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=70 title='Lectures'>
         70
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=71 title='Découper les scripts avec R'>
         71
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=72 title='Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)'>
         72
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=73 title='Sauvegarder une requête'>
         73
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=74 title='Sauvegarder une requête'>
         74
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=75 title='Les requêtes stockées'>
         75
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=76 title='Les requêtes stockées: les vues'>
         76
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=77 title='Manipuler les enregistrements'>
         77
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=78 title='Mettre à jour des enregistrements'>
         78
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=79 title='Supprimer des enregistrements'>
         79
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=80 title='Travail de la semaine'>
         80
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=81 title='Travail de la semaine'>
         81
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=82 title='Travail de la semaine'>
         82
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=83 title='Lectures'>
         83
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=84 title='Sauvegarder les requêtes'>
         84
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=85 title='Sauvegarder une requête'>
         85
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=86 title='Sauvegarder une requête'>
         86
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=87 title='Les requêtes stockées'>
         87
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=88 title='Les requêtes stockées: les vues'>
         88
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=89 title='Manipuler les enregistrements'>
         89
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=90 title='Mettre à jour des enregistrements'>
         90
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=91 title='Supprimer des enregistrements'>
         91
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=92 title='Travail de la semaine'>
         92
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=93 title='Travail de la semaine'>
         93
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=94 title='Travail de la semaine'>
         94
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=95 title='Lectures'>
         95
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=96 title='Découper les scripts avec R'>
         96
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=97 title='Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)'>
         97
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=98 title='Sauvegarder une requête'>
         98
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=99 title='Sauvegarder une requête'>
         99
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=100 title='Les requêtes stockées'>
         100
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=101 title='Les requêtes stockées: les vues'>
         101
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=102 title='Manipuler les enregistrements'>
         102
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=103 title='Mettre à jour des enregistrements'>
         103
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=104 title='Supprimer des enregistrements'>
         104
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=105 title='Travail de la semaine'>
         105
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=106 title='Travail de la semaine'>
         106
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=107 title='Travail de la semaine'>
         107
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=108 title='Lectures'>
         108
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=109 title='Découper les scripts avec R'>
         109
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=110 title='Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)'>
         110
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=111 title='Sauvegarder les requêtes'>
         111
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=112 title='Sauvegarder une requête'>
         112
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=113 title='Sauvegarder une requête'>
         113
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=114 title='Les requêtes stockées'>
         114
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=115 title='Les requêtes stockées: les vues'>
         115
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=116 title='Manipuler les enregistrements'>
         116
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=117 title='Mettre à jour des enregistrements'>
         117
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=118 title='Supprimer des enregistrements'>
         118
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=119 title='Travail de la semaine'>
         119
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=120 title='Travail de la semaine'>
         120
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=121 title='Travail de la semaine'>
         121
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=122 title='Lectures'>
         122
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=123 title='Découper les scripts avec R'>
         123
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=124 title='Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)'>
         124
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=125 title='Sauvegarder une requête'>
         125
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=126 title='Sauvegarder une requête'>
         126
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=127 title='Les requêtes stockées'>
         127
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=128 title='Les requêtes stockées: les vues'>
         128
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=129 title='Manipuler les enregistrements'>
         129
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=130 title='Mettre à jour des enregistrements'>
         130
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=131 title='Supprimer des enregistrements'>
         131
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=132 title='Travail de la semaine'>
         132
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=133 title='Travail de la semaine'>
         133
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=134 title='Travail de la semaine'>
         134
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=135 title='Lectures'>
         135
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=136 title='Découper les scripts avec R'>
         136
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=137 title='Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)'>
         137
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=138 title='Sauvegarder une requête'>
         138
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=139 title='Sauvegarder une requête'>
         139
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=140 title='Les requêtes stockées'>
         140
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=141 title='Les requêtes stockées: les vues'>
         141
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=142 title='Manipuler les enregistrements'>
         142
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=143 title='Mettre à jour des enregistrements'>
         143
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=144 title='Supprimer des enregistrements'>
         144
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=145 title='Travail de la semaine'>
         145
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=146 title='Travail de la semaine'>
         146
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=147 title='Travail de la semaine'>
         147
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=148 title='Sauvegarder une requête'>
         148
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=149 title='Sauvegarder une requête'>
         149
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=150 title='Les requêtes stockées'>
         150
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=151 title='Les requêtes stockées: les vues'>
         151
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=152 title='Manipuler les enregistrements'>
         152
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=153 title='Mettre à jour des enregistrements'>
         153
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=154 title='Supprimer des enregistrements'>
         154
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=155 title='Travail de la semaine'>
         155
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=156 title='Travail de la semaine'>
         156
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=157 title='Travail de la semaine'>
         157
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=158 title='Lectures'>
         158
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=159 title='Découper les scripts avec R'>
         159
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=160 title='Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)'>
         160
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=161 title='Discussionyens par étudiant et la variance'>
         161
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=162 title='Lectures'>
         162
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=163 title='Découper les scripts avec R'>
         163
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=164 title='Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)'>
         164
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=165 title='Discussionts/donnees/'>
         165
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=166 title='Discussion'>
         166
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=167 title='Discussion'>
         167
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=168 title='Discussion'>
         168
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=169 title='Discussion'>
         169
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=170 title='Découper les étapes de son travail et les automatiser au moyen d&#39;un seul script (un &quot;pipeline&quot;)'>
         170
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=171 title='Discussion'>
         171
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=172 title='Discussion'>
         172
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=173 title='Discussion'>
         173
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=174 title='Discussion'>
         174
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="./libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="./libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>