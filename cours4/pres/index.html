<!DOCTYPE html>
<html>
<head>
  <title>Séance 4: Les outils pour la reproductibilité</title>
  <meta charset="utf-8">
  <meta name="description" content="Séance 4: Les outils pour la reproductibilité">
  <meta name="author" content="Dominique Gravel &amp; Steve Vissault">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="./libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="./libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="./libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="./libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/default.css"></link>
<link rel=stylesheet href="./assets/css/ribbons.css"></link>
<link rel=stylesheet href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="./libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="./libraries/frameworks/io2012/js/slides" 
    src="./libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <aside class="gdbar">
    <img src="assets/img/logo.png">
  </aside>
  <hgroup class="auto-fadein">
    <h1>Séance 4: Les outils pour la reproductibilité</h1>
    <h2>BIO 500 - Méthodes en écologie computationnelle</h2>
    <p>Dominique Gravel &amp; Steve Vissault<br/>Laboratoire d'écologie intégrative</p>
  </hgroup>
  <article></article>
  <footer class = 'license'>
    <a href='http://creativecommons.org/licenses/by-nc-sa/3.0/'>
    <img width = '80px' src = 'http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png'>
    </a>
  </footer>
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <!--  <a href="#slide-1"></a> -->
  <hgroup>
    <h1>Séance 5</h1>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Ces diapositives sont disponibles en <a href="https://econumuds.github.io/BIO500/cours4/">version web</a> et en <a href="./assets/pdf/S4-BIO500.pdf">PDF</a>.</li>
<li>L&#39;ensemble du matériel de cours est disponible sur la page du portail <a href="https://www.usherbrooke.ca/moodle2-cours/course/view.php?id=12189">moodle</a>.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-2" style="background:;">
  <!--  <a href="#slide-2"></a> -->
  <hgroup>
    <h1>Les outils pour la reproductibilité</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-3" style="background:;">
  <!--  <a href="#slide-3"></a> -->
  <hgroup>
    <h1>Les étapes du travail d&#39;un biologiste</h1>
  </hgroup>
  <article data-timings="">
    <div style='text-align:center;'>
<img src="./assets/img/flow_full_repro.png" width="100%"></img>
</div>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-4" style="background:;">
  <!--  <a href="#slide-4"></a> -->
  <hgroup>
    <h1>Git: Un système de controle de version</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h1>Une situation courante</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <h2>Une situation qui vous est familière:</h2>

<pre><code class="bash">MonTravailSession/
  |___ data/
        |___ data_01122018.csv
        |___ data_011022018.csv
  |___ rapportVeg_jean_v1_01012018.docx
  |___ rapportVeg_juliette_v1_01012018.docx
  |___ rapportVeg_rémi_v1_04012018.docx
  |___ rapportVeg_rémi_v2_10012018.docx
  |___ rapportFinal_20012018.docx
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <h2>le travail d&#39;équipe</h2>

<p>Ses difficultées</p>

<ul>
<li>Multi-utilisateurs</li>
<li>Garder une trace de l&#39;historique de modifications <strong>d&#39;un ensemble de fichiers</strong>.</li>
<li>Revenir aux versions précédentes</li>
<li>comparer des versions d&#39;un fichier.</li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-6" style="background:;">
  <!--  <a href="#slide-6"></a> -->
  <hgroup>
    <h1>Système de controle éxistants</h1>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Mettre une screenshot de Dropbox, et de Word pour tracker les versions.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-7" style="background:;">
  <!--  <a href="#slide-7"></a> -->
  <hgroup>
    <h1>Qu&#39;est ce que Git?</h1>
  </hgroup>
  <article data-timings="">
    <p>C&#39;est un système qui permet de suivre l&#39;ajout et les modifications pour un ensemble de fichier. C&#39;est le cahier de lab du programmeur.</p>

<ul>
<li>Logiciel libre</li>
<li>Soutenu par une large communauté (12 millions d&#39;utilisateurs dans le monde)</li>
<li>Par défault, Git est installé par défault sur les machines Linux et MacOSX</li>
<li>Il peut être installé sur Windows: <a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-8" style="background:;">
  <!--  <a href="#slide-8"></a> -->
  <hgroup>
    <h1>Qu&#39;est ce que Git?</h1>
  </hgroup>
  <article data-timings="">
    <p>Il présente l&#39;avantage d&#39;être extrement versatile mais le désavantage de fonctionner seulement avec les fichiers plein texte.</p>

<p><strong>Question</strong>: Qu&#39;est ce qu&#39;un fichier plein texte?</p>

<!-- TODO: Qu'est ce qu'un fichier plein texte? Est-ce que je peux faire du contrôle de version avec un document word -->

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-9" style="background:;">
  <!--  <a href="#slide-9"></a> -->
  <hgroup>
    <h1>Initialisation d&#39;un dépôt Git</h1>
  </hgroup>
  <article data-timings="">
    <p>Git suit les modifications à l&#39;intérieur d&#39;un dossier que l&#39;on appelle dépôt (<code>repository</code>). Pour initialiser le suivi d&#39;un répertoire (initialiser un dépôt), il vous suffit d&#39;utiliser la commande <code>git init</code>.</p>

<pre><code class="bash">mkdir ~/Documents/travail_BIO500 # Créer un répertoire de travail dans le répertoire Documents.
cd  ~/Documents/travail_BIO500 # Se déplacer vers ce répertoire
git init # Initialiser le suivi de version de ce dossier.
ls -la # Lister le contenu du répertoire de travail.
</code></pre>

<p>Le dossier <code>.git</code> permet de garder une trace de l&#39;ensemble des opérations que vous allez faire dans ce répertoire.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-10" style="background:;">
  <!--  <a href="#slide-10"></a> -->
  <hgroup>
    <h1>Exercice: Initialiser votre répertoire de travail avec git</h1>
  </hgroup>
  <article data-timings="">
    <p><strong>À l&#39;aide de votre terminal:</strong></p>

<ol>
<li>Créer un dossier (<code>mkdir</code>)</li>
<li>Créer un fichier (<code>touch</code>)</li>
<li>Initialiser votre dépot <code>git</code> (<code>git init</code>)</li>
<li>Vérifier que le dossier caché (<code>.git</code>) se trouve dans votre nouveau répertoire</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-11" style="background:;">
  <!--  <a href="#slide-11"></a> -->
  <hgroup>
    <h1>Git en 3 étapes</h1>
  </hgroup>
  <article data-timings="">
    <p>On modifie le ou les fichiers, on ajoute la modification à Git puis on met un commentaire sur la modification apportée.</p>

<ol>
<li>Modification d&#39;un ou plusieurs fichiers sources</li>
<li><code>git add monFichier1.txt monFichier2.txt</code> - Ajout des fichiers modifiés</li>
<li><code>git commit -m &quot;mon commentaire&quot;</code> - Commentaire sur la modification apportée</li>
</ol>

<p>On répète ces étapes à plusieurs reprises au cours de l&#39;écriture d&#39;un document et/ou de l&#39;avancé d&#39;un projet.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-12" style="background:;">
  <!--  <a href="#slide-12"></a> -->
  <hgroup>
    <h1>Git status</h1>
  </hgroup>
  <article data-timings="">
    <p>Votre meilleur ami, <code>git status</code>, permet de prendre connaissance de l&#39;état de notre dépôt Git.</p>

<pre><code class="bash">Sur la branche master

Validation initiale

Fichiers non suivis:
  (utilisez &quot;git add &lt;fichier&gt;...&quot; pour inclure dans ce qui
  sera validé)


        monFichier1.txt

aucune modification ajoutée à la validation mais des
fichiers non suivis sont présents (utilisez &quot;git add&quot; pour
les suivre).
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-13" style="background:;">
  <!--  <a href="#slide-13"></a> -->
  <hgroup>
    <h1>Exercice: Effectuer votre premier <code>commit</code></h1>
  </hgroup>
  <article data-timings="">
    <h2>Première partie</h2>

<ol>
<li>Déplacer vous dans votre répertoire de travail</li>
<li>Ajouter un fichier intituler <code>travail_BIO500.txt</code> et remplisser le de faux texte</li>
<li>Effectuer un <code>git status</code></li>
</ol>

<h2>Deuxième partie</h2>

<ol>
<li>Ajouter ce fichier à votre dépot git (<code>git add</code>)</li>
<li>Effectuer un <code>git status</code></li>
<li>Décrire la modification que vous venez d&#39;apporter (<code>git commit</code>)</li>
</ol>

<p>À chaque <code>git status</code>, prenez le temps de regarder la sortie (message)</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-14" style="background:;">
  <!--  <a href="#slide-14"></a> -->
  <hgroup>
    <h1>Exercice: Effectuer votre premier <code>commit</code></h1>
  </hgroup>
  <article data-timings="">
    <h2>Troisième partie</h2>

<ol>
<li>Modifier le fichier <code>travail_BIO500.txt</code></li>
<li>Ajouter la modification à votre dépot git (<code>git add</code>)</li>
<li>Effectuer un <code>git status</code></li>
</ol>

<p>À chaque <code>git status</code>, prenez le temps de regarder la sortie (message)</p>

<h2>Quatrième partie</h2>

<ol>
<li>Modifier à nouveau le fichier <code>travail_BIO500.txt</code></li>
<li>Effectuer un <code>git diff</code></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h1>Quelques notions de base</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <div style='text-align:center;'>
<img src="./assets/img/git_1.png" width="100%"></img>
</div>

    </div>
    <div class='right' style='float:right;width:48%'>
     <ul>
<li>Une branche (<code>master</code> par défault): c&#39;est un série de commentaires (<code>commit</code>)</li>
<li>Le dernier commentaire (<code>commit</code>) est ce que l&#39;on appelle la tête de la brance (<code>HEAD</code>), elle contient la version la plus à jour des fichiers.</li>
<li>À chaque commentaires d&#39;édition (<code>commit</code>) est attaché une version des fichiers.</li>
</ul>

    </div>
  </article>
</slide>
<slide class="" id="slide-16" style="background:;">
  <!--  <a href="#slide-16"></a> -->
  <hgroup>
    <h1>Le journal de Git</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="bash">cd Documents/Git/BIO500 # Ceci est mon chemin d&#39;accès
git log
</code></pre>

<pre><code class="bash">commit 38d4a2700980b9c765f4abdb33e2f6b598aac4d5
Author: Steve Vissault &lt;s.vissault@yahoo.fr&gt;
Date:   Wed Feb 28 20:38:05 2018 -0500

    Modifs sur plan de match

commit 61601ff86e712d0a77ebd24c5277fe55fab9de6e
Author: Steve Vissault &lt;s.vissault@yahoo.fr&gt;
Date:   Wed Feb 28 20:33:20 2018 -0500

    Modifications au cours3 (retrait slides), ajout reponses
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h1>Le journal de Git</h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <pre><code class="bash">commit 38d4a2700980b9c765f4abdb33e2f6b598aac4d5
Author: Steve Vissault &lt;s.vissault@yahoo.fr&gt;
Date:   Wed Feb 28 20:38:05 2018 -0500

    Modifs sur plan de match

commit 61601ff86e712d0a77ebd24c5277fe55fab9de6e
Author: Steve Vissault &lt;s.vissault@yahoo.fr&gt;
Date:   Wed Feb 28 20:33:20 2018 -0500

    Modifications au cours3 (retrait slides)
</code></pre>

    </div>
    <div class='right' style='float:right;width:48%'>
     <div style='text-align:center;'>
<img src="./assets/img/git_3.png" width="100%"></img>
</div>

    </div>
  </article>
</slide>
<slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h1>Se déplacer sur la branche <code>master</code></h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <pre><code class="bash">git checkout 4abdb33e2f6b598aac4d5
</code></pre>

<p>Permet de se déplacer vers un <code>commit</code> précis.</p>

    </div>
    <div class='right' style='float:right;width:48%'>
     <div style='text-align:center;'>
<img src="./assets/img/git_3.png" width="100%"></img>
</div>

    </div>
  </article>
</slide>
<slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h1>Se déplacer sur la branche <code>master</code></h1>
  </hgroup>
  <article>
    
    <div class='left' style='float:left;width:48%'>
     <pre><code class="bash">git checkout master
</code></pre>

<p>Permet de se déplacer vers un <code>commit</code> le plus récent.</p>

    </div>
    <div class='right' style='float:right;width:48%'>
     <div style='text-align:center;'>
<img src="./assets/img/git_3.png" width="100%"></img>
</div>

    </div>
  </article>
</slide>
<slide class="transition" id="slide-20" style="background:;">
  <!--  <a href="#slide-20"></a> -->
  <hgroup>
    <h1>Le makefile</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-21" style="background:;">
  <!--  <a href="#slide-21"></a> -->
  <hgroup>
    <h1>Les étapes du travail d&#39;un biologiste</h1>
  </hgroup>
  <article data-timings="">
    <div style='text-align:center;'>
<img src="assets/img/flow_full_repro.png"  width="90%"></img>
</div>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-22" style="background:;">
  <!--  <a href="#slide-22"></a> -->
  <hgroup>
    <h1>Qu&#39;est-ce que le makefile ?</h1>
  </hgroup>
  <article data-timings="">
    <p><strong>Définition</strong>: le makefile est un fichier qui contient un ensemble de directives qui sont exécutées par l&#39;ordinateur. Les instructions et leurs dépendances sont spécifiées dans le makefile.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-23" style="background:;">
  <!--  <a href="#slide-23"></a> -->
  <hgroup>
    <h1>À quoi il sert ?</h1>
  </hgroup>
  <article data-timings="">
    <p>Le makefile est un logiciel permettant d&#39;exécuter une série d&#39;instructions, lorsqu&#39;elles sont nécessaires. Les dépendances sont vérifiées et seulement les instructions qui requierent une mise à jour sont exécutées.</p>

<p>Nous utiliserons le makefile pour assurer la reproductibilité de la démarche entreprise dans le cours. L&#39;ensemble des instructions nécessaires à la production du rapport, de la création de la base de données à la compilation du document écrit, seront contenues dans le makefile.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-24" style="background:;">
  <!--  <a href="#slide-24"></a> -->
  <hgroup>
    <h1>Objectifs de la leçon</h1>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Reconnaitre les parties importantes d&#39;un makefile, les règles, les cibles, les dépendances et les actions</li>
<li>Écrire un makefile simple</li>
<li>Exécuter un makefile à partir du terminal</li>
<li>Préparer le makefile pour le projet de session</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-25" style="background:;">
  <!--  <a href="#slide-25"></a> -->
  <hgroup>
    <h1>Anatomie du makefile</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="bash">&lt;target&gt;: &lt;dependencies...&gt;
  &lt;commands&gt;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-26" style="background:;">
  <!--  <a href="#slide-26"></a> -->
  <hgroup>
    <h1><code>target</code></h1>
  </hgroup>
  <article data-timings="">
    <p>La cible est habituellement le nom d&#39;un fichier généré par la commande.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-27" style="background:;">
  <!--  <a href="#slide-27"></a> -->
  <hgroup>
    <h1><code>dependencies...</code></h1>
  </hgroup>
  <article data-timings="">
    <p>Une dépendance (également appelée <em>&quot;prerequesite&quot;</em>) est un fichier qui est utilisé pour créer un autre fichier appelée cible (<code>&quot;target&quot;</code>).</p>

<p>La <em>target</em> peut contenir plusieurs dépendances.</p>

<p>Il est néanmoins possible d&#39;avoir un fichier cible qui ne requiert pas de dépendance.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-28" style="background:;">
  <!--  <a href="#slide-28"></a> -->
  <hgroup>
    <h1><code>commands</code></h1>
  </hgroup>
  <article data-timings="">
    <p>La commande est l&#39;action à réaliser. Dans notre cas, nous utiliserons une commande pour exécuter un script R comme :</p>

<pre><code class="bash">Rscript script.R
</code></pre>

<p>Nous verrons plus tard dans la session le langage de mise en forme LaTeX. Dans ce cas, la commande serit:</p>

<pre><code class="bash">pdflatex manuscrit.tex
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-29" style="background:;">
  <!--  <a href="#slide-29"></a> -->
  <hgroup>
    <h1>Un exemple</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="bash"># Troisième étape, on produit une figure à partir du modèle
# et des données
figure.pdf: model.Rdata data.txt
  Rscript script3.R

# Seconde étape, on fait un modèle statistique à partir
# de ces données
model.Rdata: data.txt
  Rscript script2.R

# Première étape, on génère des données
data.txt :
  Rscript script1.R
</code></pre>

<p>Ce fichier s&#39;appelle makefile (sans extension) et il est exécuté en inscrivant simplement la commande <code>make nomDeLaCible</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-30" style="background:;">
  <!--  <a href="#slide-30"></a> -->
  <hgroup>
    <h1>Étape par étape</h1>
  </hgroup>
  <article data-timings="">
    <p><code>Rscript</code> est un programme permettant d&#39;exécuter du code R sans passer par la console R. On peut utiliser le terminal pour appeler le programme <code>Rscript</code> et lui donner comme argument un script R: <code>Rscript script1.R</code></p>

<p>Les commandes sont espacées par une <em>tabulation</em> ou 8 espaces. Assurer vous que votre tabulation corresponds bien à 8 espaces.</p>

<p>Ensemble, la cible, les dépendances et les actions constituent une règle. Cet exemple a donc 3 règles.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-31" style="background:;">
  <!--  <a href="#slide-31"></a> -->
  <hgroup>
    <h1>Comment créer un premier makefile</h1>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Ouvrez un nouveau document au moyen de atom</li>
<li>Copiez les commandes de l&#39;exemple</li>
<li>Sauvergardez le fichier, avec pour nom makefile</li>
<li>Assurez vous de trouvez les 3 scripts dans le dépôt git</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-32" style="background:;">
  <!--  <a href="#slide-32"></a> -->
  <hgroup>
    <h1>Script 1</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">  set.seed(1)
  X &lt;- runif(25, 0, 100)
  Y &lt;- rnorm(25, mean = X*2 + 10, sd = 25)
  write.table(cbind(X,Y), file = &quot;data.txt&quot;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-33" style="background:;">
  <!--  <a href="#slide-33"></a> -->
  <hgroup>
    <h1>Script 2</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">data &lt;- read.table(&quot;~/Bureau/exemple/data.txt&quot;, header = T)
model &lt;- lm(data$Y ~ data$X)
save(model, file = &quot;~/Bureau/exemple/model.Rdata&quot;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-34" style="background:;">
  <!--  <a href="#slide-34"></a> -->
  <hgroup>
    <h1>Script 3</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">data &lt;- read.table(&quot;~/Bureau/exemple/data.txt&quot;, header = T)
load(&quot;~/Bureau/exemple/model.Rdata&quot;)

pdf(&quot;resultat.pdf&quot;, 7 5)
plot(data$X, data$Y, xlab = &quot;X&quot;, ylab = &quot;Y&quot;)
abline(model)
dev.off()
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-35" style="background:;">
  <!--  <a href="#slide-35"></a> -->
  <hgroup>
    <h1>Exécuter un makefile</h1>
  </hgroup>
  <article data-timings="">
    <p>Il n&#39;est pas nécessaire de nommer le makefile <em>makefile</em>. On peut toujours spécifier un autre nom et l&#39;exécuter ainsi :</p>

<pre><code class="bash">make -f MonMakefile
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-36" style="background:;">
  <!--  <a href="#slide-36"></a> -->
  <hgroup>
    <h1>Les dépendances</h1>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Exécutez le makefile une première fois.</li>
<li>Ensuite, modifiez une valeur dans le fichier data.txt.</li>
<li>Exécutez le makefile à nouveau pour voir ce qui se produit.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-37" style="background:;">
  <!--  <a href="#slide-37"></a> -->
  <hgroup>
    <h1>Le makefile comme outil de reproductiblité</h1>
  </hgroup>
  <article data-timings="">
    <p>La rédaction du makefile nous force à spécifier les différentes étapes de notre démarche, à identifier les entrées et les sorties de différentes instructions à l&#39;ordinateur. De cette façon, le makefile permet de documenter rigoureusement la démarche réalisée.</p>

<p>Il s&#39;agit aussi d&#39;un aide-mémoire qui permet de se rappeler des étapes.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-38" style="background:;">
  <!--  <a href="#slide-38"></a> -->
  <hgroup>
    <h1>Exercice</h1>
  </hgroup>
  <article data-timings="">
    <p>Conceptualisez les différentes étapes de la démarche du travail de session jusqu&#39;à présent.</p>

<p>Identifiez les entrées, les sorties et les actions.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-39" style="background:;">
  <!--  <a href="#slide-39"></a> -->
  <hgroup>
    <h1>Les messages de make</h1>
  </hgroup>
  <article data-timings="">
    <p>Il est possible de forcer make à réaliser certaines actions. Par exemple, si on exécute à nouveau make</p>

<pre><code class="bash">make
</code></pre>

<p>On obtient le message :</p>

<pre><code class="bash">make : &#39;data.txt&#39; is up to date
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-40" style="background:;">
  <!--  <a href="#slide-40"></a> -->
  <hgroup>
    <h1>Les messages de make</h1>
  </hgroup>
  <article data-timings="">
    <p>On peut forcer une étape, par exemple le calcul du modèle, ainsi :</p>

<pre><code class="bash">make model.Rdata
</code></pre>

<p>Dans ce cas-ci, on obtient le message :</p>

<pre><code class="bash">make: Nothing to be done for &#39;script2.R&#39;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-41" style="background:;">
  <!--  <a href="#slide-41"></a> -->
  <hgroup>
    <h1>Les messages de make</h1>
  </hgroup>
  <article data-timings="">
    <p><em>up to date</em> signifie que le makefile a une règle dont la cible est le nom du fichier et qu&#39;il est à jour</p>

<p><em>Nothing to be done</em> indique que le fichier existe, mais que soit</p>

<ul>
<li>il n&#39;y a pas de règle pour ce fichier</li>
<li>il y a une règle, mais aucune action à réaliser</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-42" style="background:;">
  <!--  <a href="#slide-42"></a> -->
  <hgroup>
    <h1>Nettoyage du dépôt en fin de script</h1>
  </hgroup>
  <article data-timings="">
    <p>Il arrive que certains scripts génèrent des fichiers temporaires qui ne doivent pas être conservés inutilement.</p>

<p>Dans l&#39;exemple précédent, on pourrait vouloir éliminer le modèle, qui n&#39;est finalement utilisé que pour réaliser la figure. On peut ainsi inscrire à la fin du makefile :</p>

<pre><code class="bash">clean :
  rm -f model.Rdata
</code></pre>

<p><code>rm -f model.Rdata</code> va éliminer à la toute fin l&#39;objet R contenant le modèle intitulé <code>model.Rdata</code>. Notez ici qu&#39;il n&#39;y a pas de dépendance, ce qui indique que cette opération sera systématiquement exécutée.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-43" style="background:;">
  <!--  <a href="#slide-43"></a> -->
  <hgroup>
    <h1>Dépendances</h1>
  </hgroup>
  <article data-timings="">
    <p>L&#39;ordre de présentation des dépendances est arbitraire. Elles ne seront pas nécessairement vérifiées dans l&#39;ordre présenté.</p>

<p>Un truc est de schématiser les dépendances (des noeuds) et les actions (des flèches)</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-44" style="background:;">
  <!--  <a href="#slide-44"></a> -->
  <hgroup>
    <h1>Autres ressources disponibles en ligne :</h1>
  </hgroup>
  <article data-timings="">
    <p><a href="https://swcarpentry.github.io/make-novice/02-makefiles/">https://swcarpentry.github.io/make-novice/02-makefiles/</a></p>

<p><a href="https://gist.github.com/isaacs/62a2d1825d04437c6f08">https://gist.github.com/isaacs/62a2d1825d04437c6f08</a></p>

<p><a href="http://gl.developpez.com/tutoriel/outil/makefile/">http://gl.developpez.com/tutoriel/outil/makefile/</a></p>

<p><a href="http://icps.u-strasbg.fr/people/loechner/public_html/enseignement/GL/make.pdf">http://icps.u-strasbg.fr/people/loechner/public_html/enseignement/GL/make.pdf</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-45" style="background:;">
  <!--  <a href="#slide-45"></a> -->
  <hgroup>
    <h1>Travail pour la semaine</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-46" style="background:;">
  <!--  <a href="#slide-46"></a> -->
  <hgroup>
    <h1>Consignes</h1>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Identifiez clairement vos questions de recherche</li>
<li>Planifiez les requêtes à réaliser pour traiter les données</li>
<li>Incluez les requêtes dans le makefile</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-47" style="background:;">
  <!--  <a href="#slide-47"></a> -->
  <hgroup>
    <h1>Lectures</h1>
  </hgroup>
  <article data-timings="">
    <p>Sandve et al. 2013. Ten Simple Rules for Reproducible Computational
Research. PLoS Computational Biology. 9: e1003285</p>

<p>Silberzahn et Uhlman. 2015. Many hands make tight work. Nature 526 : 189-191.</p>

<p>Barba. 2016. The hard road to reproducibility. Science 354: 142.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='Séance 5'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Les outils pour la reproductibilité'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Les étapes du travail d&#39;un biologiste'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Git: Un système de controle de version'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Une situation courante'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Système de controle éxistants'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Qu&#39;est ce que Git?'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Qu&#39;est ce que Git?'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='Initialisation d&#39;un dépôt Git'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='Exercice: Initialiser votre répertoire de travail avec git'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Git en 3 étapes'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Git status'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Exercice: Effectuer votre premier <code>commit</code>'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Exercice: Effectuer votre premier <code>commit</code>'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Quelques notions de base'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Le journal de Git'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='Le journal de Git'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='Se déplacer sur la branche <code>master</code>'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='Se déplacer sur la branche <code>master</code>'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Le makefile'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Les étapes du travail d&#39;un biologiste'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='Qu&#39;est-ce que le makefile ?'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='À quoi il sert ?'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='Objectifs de la leçon'>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='Anatomie du makefile'>
         25
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='<code>target</code>'>
         26
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='<code>dependencies...</code>'>
         27
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='<code>commands</code>'>
         28
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title='Un exemple'>
         29
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='Étape par étape'>
         30
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='Comment créer un premier makefile'>
         31
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title='Script 1'>
         32
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title='Script 2'>
         33
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title='Script 3'>
         34
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title='Exécuter un makefile'>
         35
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='Les dépendances'>
         36
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=37 title='Le makefile comme outil de reproductiblité'>
         37
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=38 title='Exercice'>
         38
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=39 title='Les messages de make'>
         39
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=40 title='Les messages de make'>
         40
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=41 title='Les messages de make'>
         41
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=42 title='Nettoyage du dépôt en fin de script'>
         42
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=43 title='Dépendances'>
         43
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=44 title='Autres ressources disponibles en ligne :'>
         44
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=45 title='Travail pour la semaine'>
         45
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=46 title='Consignes'>
         46
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=47 title='Lectures'>
         47
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="./libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="./libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>