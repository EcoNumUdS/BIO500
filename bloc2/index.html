<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>BIO500</title>
    <meta charset="utf-8" />
    <meta name="author" content="Victor Cameron" />
    <script src="assets/header-attrs-2.30/header-attrs.js"></script>
    <link href="assets/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="assets/remark-css-0.0.1/hygge.css" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/bio500.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">



class: title-slide, middle

&lt;style type="text/css"&gt;
  .title-slide {
    background-image: url('../assets/img/bg.jpg');
    background-color: #23373B;
    background-size: contain;
    border: 0px;
    background-position: 600px 0;
    line-height: 1;
  }
&lt;/style&gt;

&lt;div class="lab-logo"&gt;&lt;/div&gt;

# S√©ance 4

&lt;hr width="65%" align="left" size="0.3" color="orange"&gt;&lt;/hr&gt;

## Les outils pour la reproductibilit√©

&lt;hr width="65%" align="left" size="0.3" color="orange" style="margin-bottom:40px;" alt="@Martin Sanchez"&gt;&lt;/hr&gt;

.instructors[
  **BIO500** - Victor Cameron
]

---

# Les √©tapes du travail d'un biologiste

.center[
  &lt;img src="./assets/img/flow_full_repro.png" width="100%"&gt;&lt;/img&gt;
]

---

# Une situation courante

.pull-left[
## Une situation qui vous est famili√®re:

.font90[
```bash
MonTravailSession/
  |___ data/
        |___ data_01122018.csv
        |___ data_011022018.csv
  |___ rapportVeg_jean_v1_01012018.docx
  |___ rapportVeg_juliette_v1_01012018.docx
  |___ rapportVeg_r√©mi_v1_04012018.docx
  |___ rapportVeg_r√©mi_v2_10012018.docx
  |___ rapportFinal_20012018.docx
```
]]

.pull-right[

## le travail d'√©quipe

Ses difficult√©es techniques:

- Multi-utilisateurs
- Garder une trace de l'historique de modifications **d'un ensemble de fichiers**
- Revenir aux versions pr√©c√©dentes
- Comparer des versions d'un fichier
]

---

# Syst√®mes de versionnage existants

## Un exemple avec Dropbox

.center[
![](./assets/img/dropbox.png)
]

---

# Syst√®mes de versionnage existants

## Un exemple MS Word

.center[
![](./assets/img/word.gif)
]

---
class: inverse, center, middle

# Git: Un syst√®me de controle de version pour programmeur

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

---

# Qu'est ce que Git?

.pull-left[

C'est un syst√®me qui permet de suivre l'**ajout** et les **modifications** pour un ensemble de fichiers.

**C'est le cahier de lab du programmeur.**

- Logiciel libre soutenu par une large communaut√© (12 millions d'utilisateurs dans le monde)
- Par d√©fault, Git est install√© sur les syst√®mes d'exploitation Linux et Mac.
- Il peut √™tre install√© sur Windows: [https://git-scm.com/download/win](https://git-scm.com/download/win)
]

.pull-right[
  .center[
    &lt;img src="./assets/img/git.png" width="70%"&gt;&lt;/img&gt;
    &lt;img src="./assets/img/LinusTorvalds.jpg" width="50%"&gt;&lt;/img&gt;

    Linus Torvalds
  ]
]

---

# Qu'est ce que Git?

Il pr√©sente l'avantage d'√™tre extr√™mement versatile.

1. Racontez l'histoire de votre projet
2. Voyager dans le temps
3. Exp√©rimentez avec les changements
4. Backup votre travail
5. **Collaborer sur des projets**

--

Mais le d√©savantage de fonctionner seulement avec les fichiers "plain text"...

**Question**: Qu'est ce qu'un fichier "plain text"?

---
# Les grandes √©tapes de git

0. Explorer l'interface web de github
1. Cr√©er un compte
2. Cr√©er un d√©p√¥t 
3. Installer git 
4. Associer un d√©p√¥t √† RStudio
5. Bien structurer un projet 
6. Enregistrer les modifications 
7. Revenir en arri√®re 
8. R√©cup√©rer les modifications de co-√©quipiers

---
class: inverse, center, middle

# L'histoire d'un projet

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

---
# L'histoire d'un projet

.pull-left[
## Une situation famili√®re:

.font90[
```bash
MonTravailSession/
  |___ data/
        |___ data_01122018.csv
        |___ data_011022018.csv
  |___ rapportVeg_jean_v1_01012018.docx
  |___ rapportVeg_juliette_v1_01012018.docx
  |___ rapportVeg_r√©mi_v1_04012018.docx
  |___ rapportVeg_r√©mi_v2_10012018.docx
  |___ rapportVeg_r√©mi_v3_12012018.docx
  |___ rapportVeg_r√©mi_v4_02022018.docx
  |___ rapportFinal_03022018.docx
  |___ rapportFinalVRAIMENT_04022018.docx
```
]]

--

.pull-right[

## Vous √† la fin de ce cours:
```bash
MonTravailSession/
  |___ .git/
  |___ data/
        |___ data_01122018.csv
        |___ data_011022018.csv
  |___ rapportVeg.Rmd
```
]

---

# Quelques notions de base

.pull-left[
  .center[
    &lt;img src="./assets/img/git_1.png" width="100%"&gt;&lt;/img&gt;
  ]
]

.pull-right[

- Une branche (`master` par d√©fault): c'est un s√©rie de commentaires (`commit`)
- Le dernier commentaire (`commit`) est ce que l'on appelle la t√™te de la branche (`HEAD`), elle contient la version la plus √† jour des fichiers.
- √Ä chaque commentaire d'√©dition (`commit`) est attach√©e une version des fichiers.
]

---

# Le journal de Git

## L'historique des modifications

.center[
![](./assets/img/rstudio_git_history.gif)
]

---

# Le journal de Git

.pull-left[
```bash
git log
```
ou

![](./assets/img/rstudio_git_history.png)
]

.pull-right[
  .center[
    &lt;img src="./assets/img/git_3.png" width="100%"&gt;&lt;/img&gt;
  ]
]

---

# Se d√©placer sur la branche `master`

.pull-left[
```bash
git checkout 4abdb33e2f6b598aac4d5
```
ou

![](./assets/img/rstudio_git_history.png)
]

.pull-right[
  .center[
    &lt;img src="./assets/img/git_3.png" width="100%"&gt;&lt;/img&gt;
  ]
]

---

# Se d√©placer sur la branche `master`

.pull-left[

```bash
git checkout master
```
ou

![](./assets/img/rstudio_git_history.png)
]

Permet de se d√©placer vers le `commit` le plus r√©cent.

.pull-right[
  .center[
    &lt;img src="./assets/img/git_3.png" width="100%"&gt;&lt;/img&gt;
  ]
]

---
# Revenir en arri√®re dans le temps

Les commandes de git sont tr√®s efficaces et puissantes, elles peuvent n√©anmoins √™tre fastidieuses et difficiles pour les d√©butants. 

RStudio facilite ce travail avec un simple onglet "history" et avec un navigateur qui vous permet de passer d'une version √† l'autre et de mettre en valeur les modifications qui ont √©t√© enregistr√©es sous forme de commit.

---

# Exercice 

1. Cr√©er un d√©p√¥t sur GitHub
2. Associer le d√©p√¥t √† RStudio
3. Ajouter un nouveau fichier (`add` *staged* et `commit`)
4. T√©l√©verser les modifications sur le serveur (`push`)
5. Observerver les modifications sur le r√©pertoire GitHub

---
# Travailler en √©quipe 

- Git a √©t√© sp√©cifiquement cr√©√© pour travailler en √©quipe.
- Plusieurs utilisateurs peuvent se connecter au m√™me r√©pertoire et y apporter des modifications.
- √Ä chaque fois que l'on ouvre un projet il est appropri√© d'utiliser la commande `git pull` (un bouton sur l'interface git de Rstudio) afin de r√©cup√©rer les modifications des autres membres de l'√©quipe.

![](./assets/img/rstudio_git_pull.png)

---
# Travailler en √©quipe 

.center[
  &lt;img src="./assets/img/git_workflow2.png" width="45%"&gt;&lt;/img&gt;
]

---
# La puissance de git

Les fonctionnalit√©s de git sont immenses et RStudio permet de bien les utiliser. 

Un tutoriel complet est disponible ici[https://happygitwithr.com/rstudio-git-github.html]

---

# En r√©sum√©

.pull-left[
## Enregistrer l'histoire du projet
  - `git add` ou `git stage`
  - `git commit`
  - `git status`

## Voyager dans le temps
  - `git checkout`
]
.pull-right[

## Verser sur le serveur 
  - `git push`

## Collaborer sur des projets
  - `git pull`
  - `git clone`
]

---

# Exercice 

Cet exercice se fait en √©quipe de 2.

1. Un membre ajoute √† son r√©pertoire GitHub un fichier `README.md` avec `# Titre` pour ent√™te et enregistre les modifications (`commit` puis `push`).
2. Associer le d√©p√¥t GitHub √† RStudio sur l'ordinateur du partenaire.
3. Chacun modifie l'ent√™te du fichier `README.md` et enregistre les modifications.
4. Git `commit` puis `push`.

Qu'est-ce qui arrive ?

--

## Un merge conflict (conflit de fusion) !!

Vous avez chacun fait des modifications sur un m√™me fichier. Git ne sait pas quelle version prioriser.

---

# Gestion des conflits

Le conflit de de fusion est le r√©sultat de deux modifications concurrentes sur un m√™me fichier. C'est le conflit le plus fr√©quent et survient lorsqu'on oublie de `git pull` avant de `git push`

Il est possible de r√©soudre le conflit directement dans RStudio. Essayez-vous !

Marche √† suivre : [Chapitre 7.3 *Git, Conflits*](https://econumuds.github.io/BIO500/git.html#conflits)

---

# Gestion des conflits

[Chapitre 7.3 *Git, Conflits*](https://econumuds.github.io/BIO500/git.html#conflits)

1. `pull` pour r√©cup√©rer les modifications
2. Inspecter le fichier en conflit
3. R√©soudre le conflit
4. Enregistrer les modifications : `add` (*staged*), `commit` et `push`

![](./assets/img/rstudio-merge-conflict.png)

---
class: inverse, center, middle

# Structurer un projet

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

&lt;br&gt;
- Organisation des fichiers
- Documentation

Un guide est disponible au [Chapitre Bonnes pratiques](https://econumuds.github.io/BIO500/bonnes_pratiques.html)

---

# Organisation des fichiers

.small[
```bash
monProjet/
‚îÇ
‚îú‚îÄ‚îÄ .git/
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ raw/
‚îÇ   ‚îî‚îÄ‚îÄ processed/
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ data_cleaning.R
‚îÇ   ‚îú‚îÄ‚îÄ data_analysis.R
‚îÇ   ‚îî‚îÄ‚îÄ data_visualisation.R
‚îÇ
‚îú‚îÄ‚îÄ results/
‚îÇ
‚îú‚îÄ‚îÄ reports/
‚îÇ   ‚îú‚îÄ‚îÄ report.Rmd
‚îÇ   ‚îî‚îÄ‚îÄ report.pdf
‚îÇ
‚îú‚îÄ‚îÄ .gitignore
‚îÇ
‚îî‚îÄ‚îÄ README.md
```
]

---

# Documentation

- Le code : par des commentaires pour faciliter la compr√©hension.
- Le projet : le fichier `README.md` permet de documenter le projet avec une description, une structure, des instructions et des informations compl√©mentaires.
---

# Documentation

## Le code

```r
#############################################
# Ce script permet de nettoyer les donn√©es
#
# Auteur: Victor Cameron
# Date: 2021-10-01
#############################################

# 1. Charger les donn√©es
data &lt;- read.csv("data/raw/data.csv")

# 2. Nettoyer les donn√©es
clean_data &lt;- clean_data(data)
```

---

# Documentation

## README.md

Quelques √©l√©ments √† inclure dans un fichier `README.md` :

- Titre du projet : nom du projet.
- Description du projet : objectifs, contexte, donn√©es, m√©thodes, r√©sultats. √áa peut √™tre un r√©sum√© du projet.
- Structure du r√©pertoire : organisation des fichiers, scripts et ressources.
- Description des fichiers : r√¥les et contenus des principaux fichiers.
- Instructions
    - Comment ex√©cuter le projet.
    - Comment reproduire les r√©sultats.
    - Comment acc√©der aux donn√©es et aux ressources.
- Auteurs et contributeurs : qui a travaill√© sur le projet.

---

# .gitignore

## Ignorer certains fichiers de Git

Il existe des gabarits propos√©s pour [R](https://www.toptal.com/developers/gitignore/api/r).

```bash
# R
*.Rproj.user
*.Rhistory
.RData
```

---

# Exercice

## En √©quipe de projet de session

1. Chaque membre est ajout√© √† une √©quipe, ce qui donne acc√®s √† un r√©pertoire GitHub pour le projet de session. 
   - Remplir le formulaire "R√©pertoire des √©quipes" sur *Moodle &gt; Bloc2* pour √™tre ajout√© √† une √©quipe.
2. Chaque membres de l'√©quipe clone le r√©pertoire sur son ordinateur.
3. Cr√©er la structure de projet selon les bonnes pratiques et y ajouter les fichiers n√©cessaires.
4. Ajouter un fichier README.md
5. Ajouter un fichier .gitignore

&lt;br&gt;

&gt; Voir le [Chapitre *Bonnes pratiques*](https://econumuds.github.io/BIO500/bonnes_pratiques.html) pour les d√©tails sur la structuration d'un projet et la documentation.

---

class: inverse, center, middle

# √âvaluation formative #2

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

## Structurer sa base de donn√©es

---

# √âvaluation formative #2

**√Ä remettre pour le 17 mars sur Moodle**

Vous avez √† soumettre vos scripts qui servent √† cr√©er votre base de donn√©es. Vos scripts doivent contenir les commandes `R` et `SQL` pour cr√©er la base de donn√©es, ses tables et injecter les donn√©es.

## La grille d'√©valuation est diponible sur Moodle

[Grille d'√©valuation](https://github.com/EcoNumUdS/BIO500/blob/master/ressources/bd_grille_de_correction.pdf)

---

# √âvaluation formative #2

**Un membre par √©quipe** aura √† remettre un dossier .zip contenant les scripts n√©cessaires pour cr√©er la base de donn√©e et y injecter les donn√©es.

- Remise par un seul membre par √©quipe
- Sp√©cifiez pour quel jeu de donn√©es la bd est con√ßue
- Commentez vos scripts pour que votre processus soit √©vident aux autres
- Diviser les t√¢ches en fonctions distinctes
- Un script pour une fonction
- Un script principal qui d√©crit le processus et fait appel aux fonctions qui ex√©cutent les t√¢ches
- Vos scripts doivent produire une base de donn√©es avec les tables, le type de chacun des champs, les cl√©s primaires et secondaires et les contraintes

---
class: inverse, center, middle

# Lectures et travaux √† faire

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

---

# Lecture de la semaine

- [Biswas. 2023. ChatGPT for Research and Publication: A Step-by-Step Guide](https://www.doi.org/10.5863/1551-6776-28.6.576)
- [Nat. Mach. Intell. 2023. The AI writing on the wall.](https://github.com/EcoNumUdS/BIO500/blob/master/lectures/NatMaInt2023.pdf) 
- [Cooper. 2024. Harnessing language models for coding, teaching and inclusion to empoyer research in ecology and evolution.](https://doi.org/10.1111/2041-210X.14325)

---


class: title-slide, middle

&lt;style type="text/css"&gt;
  .title-slide {
    background-image: url('../assets/img/bg.jpg');
    background-color: #23373B;
    background-size: contain;
    border: 0px;
    background-position: 600px 0;
    line-height: 1;
  }
&lt;/style&gt;

&lt;div class="lab-logo"&gt;&lt;/div&gt;

# S√©ance 5

&lt;hr width="65%" align="left" size="0.3" color="orange"&gt;&lt;/hr&gt;

## Les outils pour la reproductibilit√©

&lt;hr width="65%" align="left" size="0.3" color="orange" style="margin-bottom:40px;" alt="@Martin Sanchez"&gt;&lt;/hr&gt;

.instructors[
  **BIO500** - Victor Cameron
]

---

# Aujourd'hui

1. Retour sur le dernier cours [[Chapitre 7 Git](https://econumuds.github.io/BIO500/git.html)].
2. Le cahier de laboratoire RMarkdown [[Chapitre 8 RMarkdown](https://econumuds.github.io/BIO500/markdown1.html#anatomie-du-rmarkdown)].
3. Automatisation avec targets [[Chapitre 9 Targets](https://econumuds.github.io/BIO500/targets.html)].

---
# Retour sur le dernier cours

Il est recommand√© de bien organiser ses fichiers afin de s'y retrouver plus facilement. On y retrouve habituellement les √©l√©ments suivants  : 

- *README.md*: information sur le d√©p√¥t 
- *.Rproj*: informations sur le projet R
- *.git* : informations sur l'historique d'utilisation de git 
- *.gitignore*:  contient les extensions de fichier ignor√©s par git
- **data** : donn√©es du projet ainsi que la base de donn√©es
- **scripts**: tous les scripts R
- **figures**: r√©sultats des analyses
- **rapport**: rapport final 

---

# Retour sur le dernier cours

## .gitignore

Il existe des gabarits propos√©s pour [R](https://www.toptal.com/developers/gitignore/api/r).

```bash
# R
.RData
.Rhistory

# R projets
.Rproj.user/

# R√©sultats interm√©diaires
donnees_intermediaires/*
```

---

# Retour sur le dernier cours

## Processus ETL

.center[
![:scale 70%](assets/img/etl_processus.png)
]

- **Extract** : Collecte des donn√©es brutes de diverses sources.
- **Transform** : Nettoyage et mise en forme pour assurer coh√©rence et qualit√©.
- **Load** : Stockage des donn√©es pr√™tes √† l‚Äôusage dans un syst√®me cible.

---
class: inverse, center, middle

# Le cahier de laboratoire RMarkdown

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

---

# C'est quoi le RMarkdown

.center[
![:scale 70%](assets/img/Rmarkdown.png)
]

- Un outil pour int√©grer du texte, du code et des r√©sultats
- Un format de fichier (`.Rmd`) pour cr√©er des documents dynamiques avec R
- Une libraire R

---
# Pourquoi RMarkdown?

- Documentation (dynamique) des analyses
- Facilite le partage/communication des r√©sultats
- Utilisable sur les syst√®mes de controle de version (Git)
- Reproductible!

---
# L'anatomie du RMarkdown

&lt;br&gt;
.center[
![:scale 90%](assets/img/Rmarkdown_anatomie.png)
]

---
# L'anatomie du RMarkdown

.center[
![](assets/img/Rmarkdown_example.png)
]

---
# L'anatomie du RMarkdown

.center[
![](assets/img/Rmarkdown_example2.png)
]

&lt;span style="color:rgb(101, 136, 71);"&gt;Metadata&lt;/span&gt; + &lt;span style="color:rgb(255, 199, 65);"&gt;Texte&lt;/span&gt; + &lt;span style="color:rgb(100, 164, 213);"&gt;Code chunk&lt;/span&gt; = RMarkdown

---
# Exercice

1. Ouvrir Rstudio
2. Installer la libraire RMarkdown si necessaire (`install.packages('Rmarkdown')`)
3. Creer nouveau document RMarkdown (New File &gt; RMarkdown)
4. Identifier le YAML, texte, et code chunk du document `.Rmd`
5. Compiler le document en html (bouton üß∂ `knit`)

---
# Le fichier RMarkdown

Vous pouvez suivre √† l'aide du livre [Chapitre 8 RMarkdown](https://econumuds.github.io/BIO500/markdown1.html#anatomie-du-rmarkdown).

---
# Le YAML (metadata)

- Les m√©tadonn√©es et les options du document sont d√©finies ici
- La syntaxe est `cle: valeur`
- Commence et se termine avec trois tirets `---`
- Toujours au d√©but du document

```r
---
title: "Mon titre"
author: "Victor Cameron"
date: "29/03/2022"
output: html_document
    toc: true
---
```

Les options d'`output` d√©finissent le type de document produit.

Voir `?html_document`, `?pdf_document`, `?word_document`


---
# Markdown (contenu)

Du "plain text" avec une syntaxe minimaliste pour la mise en forme du texte

.font90[
.pull-left[
```md
# Titre 1
## Titre 2
### Titre 3

Ce mot est en *italique* et celui-ci
en **gras**.
Ici nous avons du `code`.
```
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
]


.pull-right[

# Titre 1
## Titre 2
### Titre 3

Ce mot est en *italique* et celui-ci
en **gras**.
Ici nous avons du `code`.
]
]

---
# Markdown - listes

.font90[
.pull-left[
```md
Le texte qui suit est une liste :
- Premier item
- Second item
- Troisi√®me item

Pour faire une √©num√©ration : 
1. Item 1
2. Item 2
3. Item 3
```
]

.pull-right[
Le texte qui suit est une liste :
- Premier item
- Second item
- Troisi√®me item

Pour faire une √©num√©ration : 
1. Item 1
2. Item 2
3. Item 3
]
]

---
# Markdown - images

```md
![Sch√©ma d'un projet de recherche](assets/img/flow_full_repro.png)
```

![Sch√©ma d'un projet de recherche](assets/img/flow_full_repro.png)

---
# Markdown - liens

```md
Voici le [lien](https://github.com/EcoNumUdS/BIO500) pour le GitHub du cours BIO500.
```

Voici le [lien](https://github.com/EcoNumUdS/BIO500) pour le GitHub du cours BIO500.


---
# Markdown - tables

.font90[
.pull-left[
```md
| Time          | Session | Topic    |
|:--------------|:-------:|---------:|
| _left_        | _center_| _right_  |
| 01:00 - 01:50 | 1       | Anatomy  |
| 01:50 - 02:00 |         | *Break*  |
| 02:00 - 02:45 | 2       | Tables   |
| 02:45 - 03:00 |         | *Break*  |
```
]

.pull-right[

| Time          | Session | Topic    |
|:--------------|:-------:|---------:|
| _left_        | _center_| _right_  |
| 01:00 - 01:50 | 1       | Anatomy  |
| 01:50 - 02:00 |         | *Break*  |
| 02:00 - 02:45 | 2       | Tables   |
| 02:45 - 03:00 |         | *Break*  |

]]

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
- Le `:` sp√©cifie l'alignement
- Possibilit√© d'utiliser des packages R sp√©cialis√©s pour imprimer des tableaux automatiquement √† partir de R (nous les verrons au dernier cours)



---
# Code chunk (script R)

L'utilit√© de Rmarkdown est de combiner du texte, du code et des images dans le m√™me document

### Code dans le document Rmarkdown :

.font80[
````md
Le code R doit √™tre √† l'int√©rieur d'un bloc de code (*code chunk*). Par exemple:

```{r}
data(iris)
iris_setosa &lt;- subset(iris, Species == 'setosa')
head(iris_setosa)
```
````
]

---
# Code chunk (script R)

### Sortie Rmarkdown une fois compil√© :

.font80[


``` r
data(iris)
iris_setosa &lt;- subset(iris, Species == 'setosa')
head(iris_setosa)
```

```
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa
```
]

---
# Code chunk (script R)

.pull-left[
### Code :

.font80[
````md
```{r}
data(iris)
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````
]]

.pull-right[
### Sortie:

.font80[

``` r
data(iris)
plot(iris$Sepal.Length, iris$Sepal.Width)
```

![](index_files/figure-html/unnamed-chunk-9-1.png)&lt;!-- --&gt;
]]

---

# Inclure du code directement dans le texte

### Code Rmarkdown:


``` r
le jeu de donn√©es *iris* comprend `r length(unique(iris$Species))` esp√®ces
avec un total de `r nrow(iris)` fleurs mesur√©es.
```

### Sortie:

le jeu de donn√©es *iris* comprend 3 esp√®ces avec un total de 150 fleurs mesur√©es.

---

# Configuration des code chunk

.font80[
Nommer le bloc de code (utile pour d√©bogage)
````md
```{r plot_iris}
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````
`echo=FALSE`:  afficher les r√©sultats, mais pas le code
````md
```{r plot_iris, echo=FALSE}
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````
`eval=FALSE`:  afficher le code, mais le code n'est pas √©valu√©
````md
```{r plot_iris, eval=FALSE}
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````
`include=FALSE`: √©valuer le code, mais rien n'est affich√©
````md
```{r plot_iris, include=FALSE}
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````
]

---
# Ajuster la taille de la figure

````md
```{r plot_iris, fig.height = 3, fig.width = 5, fig.align = "center"}
plot(iris$Sepal.Length, iris$Sepal.Width)
```
````

&lt;img src="index_files/figure-html/plot_iris-1.png" alt="" style="display: block; margin: auto;" /&gt;

---
# Configuration des code chunk

.font70[

``` r
str(knitr::opts_chunk$get())
```

```
## List of 53
##  $ eval         : logi TRUE
##  $ echo         : logi TRUE
##  $ results      : chr "markup"
##  $ tidy         : logi FALSE
##  $ tidy.opts    : NULL
##  $ collapse     : logi FALSE
##  $ prompt       : logi FALSE
##  $ comment      : chr "##"
##  $ highlight    : logi TRUE
##  $ size         : chr "normalsize"
##  $ background   : chr "#F7F7F7"
##  $ strip.white  : 'AsIs' logi TRUE
##  $ cache        : logi FALSE
##  $ cache.path   : chr "01_head_cache/html/"
##  $ cache.vars   : NULL
##  $ cache.lazy   : logi TRUE
##  $ dependson    : NULL
##  $ autodep      : logi FALSE
##  $ cache.rebuild: logi FALSE
##  $ fig.keep     : chr "high"
##  $ fig.show     : chr "asis"
##  $ fig.align    : chr "default"
##  $ fig.path     : chr "index_files/figure-html/"
##  $ dev          : chr "png"
##  $ dev.args     : NULL
##  $ dpi          : num 72
##  $ fig.ext      : NULL
##  $ fig.width    : num 7
##  $ fig.height   : num 7
##  $ fig.env      : chr "figure"
##  $ fig.cap      : NULL
##  $ fig.scap     : NULL
##  $ fig.lp       : chr "fig:"
##  $ fig.subcap   : NULL
##  $ fig.pos      : chr ""
##  $ out.width    : NULL
##  $ out.height   : NULL
##  $ out.extra    : NULL
##  $ fig.retina   : num 1
##  $ external     : logi TRUE
##  $ sanitize     : logi FALSE
##  $ interval     : num 1
##  $ aniopts      : chr "controls,loop"
##  $ warning      : logi TRUE
##  $ error        : logi FALSE
##  $ message      : logi TRUE
##  $ render       : NULL
##  $ ref.label    : NULL
##  $ child        : NULL
##  $ engine       : chr "R"
##  $ split        : logi FALSE
##  $ include      : logi TRUE
##  $ purl         : logi TRUE
```
]

---

# Exercice : Reproduire le document suivant

.center[
![:scale 70%](assets/img/exercice_rmd.png)
]

---
# L'univers RMarkdown

![Tutoriel](https://ulyngs.github.io/rmarkdown-workshop/slides/figures/rmarkdown_universe.jpg)

.font60[*Source: Ulrik Lyngs*]

---

# Autres ressources disponibles en ligne :

- R Markdown: The Definitive Guide [https://bookdown.org/yihui/rmarkdown/](https://bookdown.org/yihui/rmarkdown/)
- Cheat sheet [https://raw.githubusercontent.com/rstudio/cheatsheets/main/rmarkdown.pdf](https://raw.githubusercontent.com/rstudio/cheatsheets/main/rmarkdown.pdf)
- RMarkdown gallery [https://rmarkdown.rstudio.com/gallery.html](https://rmarkdown.rstudio.com/gallery.html)
- ResearchDown [https://insileco.github.io/ResearchDown/](https://insileco.github.io/ResearchDown/)

---

class: inverse, center, middle

# Automatisation de processus avec targets

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

---

# L'automatisation d'un processus

Un projet d'analyse de donn√©es comprend de nombreuses √©tapes, qui vont de la construction de la base de donn√©es, √† la production du rapport, en passant par les analyses statistiques. L'ensemble du processus peut-√™tre long et frustrant, surtout lorsque l'on a une boucle du genre : 

1. Lancer le code
2. Attendre qu'il s'ex√©cute 
3. D√©couvrir un bug 
4. Recommencer la boucle

Des petites modifications en amont peuvent affecter toute la cha√Æne en aval. Inversement, parfois on a seulement besoin de refaire une figure sans avoir √† refaire toute la cha√Æne. 

La programmation d'une s√©quence d'instructions permet de formaliser ce processus et de s'attarder seulement aux √©tapes qui doivent √™tre mises √† jour. 

---

# Qu'est-ce qu'un outil d'automatisation ?
 
**D√©finition**: un fichier qui contient un ensemble de directives qui sont ex√©cut√©es par l'ordinateur. Les instructions et leurs d√©pendances sont sp√©cifi√©es.

---

# Quel outil utiliser ?

&lt;!-- Le `makefile` est sans contredit l'outil le plus commun et le plus puissant. Sp√©cifique au syst√®me d'exploitation UNIX, il peut seulement √™tre utilis√© sur les Mac, Linux, et des machines virtuelles. Pas pratique pour les utilisateurs Windows ! --&gt;

Nous utiliserons la librairie `targets` pour assurer la reproductibilit√© de la d√©marche entreprise dans le cours. L'ensemble des instructions n√©cessaires √† la production du rapport, de la cr√©ation de la base de donn√©es √† la compilation du document √©crit, seront contenues dans une s√©quence d'instructions, plus g√©n√©ralement appel√©e 'workflow' ou 'pipeline'.

---

# Introduction √† `targets`

1. Consulter le [chapitre Targets](https://econumuds.github.io/BIO500/targets.html).
2. Regarder la [vid√©o](https://player.vimeo.com/video/700982360?h=38c890bd4f) de pr√©sentation.
3. Explorer la [documentation](https://books.ropensci.org/targets/).

---

# Un exemple minimal 

1. Lire le fichier de donn√©es `data.txt`
2. Faire une r√©gression lin√©aire 
3. Faire une figure et l'enregistrer

## Vous pouvez suivre avec le [chapitre Targets](https://econumuds.github.io/BIO500/targets.html) du livre

---

# Un exemple minimal 

## La structure de fichiers sur votre ordinateur 

```md
‚îú‚îÄ‚îÄ data             # Dossier de donn√©es
‚îÇ   ‚îú‚îÄ‚îÄ data.txt     # Jeu de donn√©es

‚îú‚îÄ‚îÄ R                # Dossier de scripts R
‚îÇ   ‚îú‚îÄ‚îÄ figure.R     # Fonction utilis√©e comme targets
‚îÇ   ‚îú‚îÄ‚îÄ analyse.R    # Fonction utilis√©e comme targets

‚îú‚îÄ‚îÄ _targets.R       # Fichier targets qui d√©finit le pipeline
```

---

# Un exemple minimal 

## Le fichier de donn√©es 


``` r
data = read.table("exemple_targets/data/data.txt", header = T)
head(data) 
```

```
##            X           Y
## 1 0.51473106  0.66633330
## 2 0.07292722 -0.18183177
## 3 0.21961688 -0.01012248
## 4 0.64920452  0.84208004
## 5 0.05969420 -0.21913796
## 6 0.13795512 -0.29987671
```

---
# Un exemple minimal 

## Le script `analyse.R`


``` r
resultat_modele = function(data) lm(data$Y~data$X)
```

---

# Un exemple minimal 

## Le script `figure.R`


``` r
ma_figure = function(data, resultat_modele) {
    plot(data$X, data$Y, xlab = "X", ylab = "Y", 
    cex.axis = 1.5, cex.lab = 1.5, pch = 19)
    abline(resultat_modele)
}
```

---

# Un exemple minimal 

## Mise √† jour de la s√©quence

Quatre √©l√©ments peuvent √™tre modifi√©s : 

- Le fichier de donn√©es `data.txt`
- Les scripts `analyse.R` et `figure.R` 
- La figure

---

# Un exemple minimal 

## target : d√©finition

Une `target` est une √©tape de la s√©quence d'instructions.  

Une `target` est au minimum une _cible_ (nom d'un objet) et une _d√©pendance_ (commande R) 

Une `target` produit un objet R qui est enregistr√© dans la m√©moire de la session

Une _d√©pendance_ est une expression qui d√©pent d'une `target` pr√©c√©dente

Le package `targets` ex√©cute seulement les targets qui ne sont pas √† jour. 

---

# Un exemple minimal 

## Anatomie d'un fichier `_targets.R`


``` r
# _targets.R file
library(targets)
source("exemple_targets/R/analyse.R")
source("exemple_targets/R/figure.R")
tar_option_set(packages = c("MASS"))
list(
  tar_target(
    data, # Le nom de l'objet
    read.table("exemple_targets/data/data.txt", header = T) # Lecture du fichier
  ), 
  tar_target(
    resultat_modele, # Cible pour le mod√®le 
    mon_modele(data) # Ex√©cution de l'analyse
  ),
  tar_target(
    figure, # Cible pour l'ex√©cution de la figure
    ma_figure(data, resultat_modele) # R√©alisation de la figure
  )
)
```

---

# Un exemple minimal 

## Construction de la s√©quence (pipeline)

La construction d'une s√©quence d'op√©ration est l'√©tape la plus importante. Cette √©tape se fait essentiellement avec du papier et un crayon, il faut identifier les d√©pendences entre les fonctions et les objets. 

La `target` d'une √©tape est utilis√©e comme argument dans une √©tape suivante.

Une target est ex√©cut√©e seulement lorsque la `target` dont elle d√©pend est plus r√©cente que l'objet qu'elle  produit. 

---

# Un exemple minimal 

## La s√©quence

### 1. On peut visualiser la s√©quence


``` r
source("exemple_targets/_targets.R")
tar_glimpse()
```

### 2. Ex√©cuter la s√©quence 


``` r
tar_make()
```

### 3. Visualiser les √©tapes qui sont √† jour et celles qui ne le sont pas


``` r
tar_visnetwork()
```

---

# Un exemple minimal 

## Qu'est-ce qui fait une bonne target ?

Comme une fonction, une `target` peut faire trois choses : 

1. Produire des donn√©es 
2. Analyser des donn√©es
3. R√©sumer une analyse ou des donn√©es (e.g. figure, tableau)

Si une target est trop longue, vous avez avantage √† la briser en petits morceaux pour que chaque √©tape soit v√©rifi√©e. 

Alternativement, pour une s√©quence d'analyse tr√®s compliqu√©e, on pourrait vouloir regrouper les √©tapes pour √©viter d'avoir une liste trop longue.  

---

# Un exemple minimal 

## Qu'est-ce qui fait une bonne `target` ? 

Le grain d'une s√©quence d√©pend donc d'un compromis : 

1. Les `targets` sont suffisamment importantes pour sauver du temps si elles sont ignor√©es (e.g. construire votre base de donn√©es et faire les injections) 
2. Suffisamment petites pour qu'il soit pertinent d'automatiser le processus
3. Retourne un seul objet qui 
  - est facile √† comprendre et interpr√©ter
  - pertinent pour le projet 
  - peut √™tre sauv√© comme objet

---

# Le `_targets.R` comme outil de reproductiblit√©

La r√©daction du ficher `_targets.R` nous force √† sp√©cifier les diff√©rentes √©tapes de notre d√©marche, √† identifier les entr√©es et les sorties de diff√©rentes instructions √† l'ordinateur. De cette fa√ßon, le fichier `_targets.R` permet de documenter rigoureusement la d√©marche r√©alis√©e.

Il s'agit aussi d'un aide-m√©moire qui permet de se rappeler des √©tapes.

---

# Bonnes pratiques

`targets` est une librairie de haut niveau pour utilisateurs exp√©riment√©s. 

Les erreurs sont difficiles √† trouver et √† r√©gler. 

Il faut s'assurer que chaque √©tape fonctionne avant d'en ajouter une autre. Il faut donc construire progressivement sont fichier `_target.R` et s'assurer qu'une √©tape s'ex√©cute parfaitement avant de passer √† la suivante. 

---

# Pour plus d'information 

Manuel de targets [https://books.ropensci.org/targets/](https://books.ropensci.org/targets/)

---

# Exercice 

Construire un script `targets` qui contient les √©tapes suivantes : 

1. Tirer au hasard 1000 valeurs d'une distribution normale avec une moyenne de 1 et un √©cart-type de 1 `rnorn(1000, 1, 1)`
2. Faire un histogramme de ces 1000 valeurs `hist()`
3. Produire un document html avec RMarkdown 

Note : la commande pour compiler du markdown est `render("mon_rmarkdown.Rmd")`

Note : Alternativement, `tar_render()` peut √™tre utilis√© √† la place de `render()` et de `tar_target()` pour compiler un document RMarkdown. *Voir la [documentation](https://docs.ropensci.org/tarchetypes/reference/tar_render.html).

---

# Nettoyage du d√©p√¥t en fin de script

Il arrive que certains scripts g√©n√®rent des fichiers temporaires qui ne doivent pas √™tre conserv√©s inutilement et √™tre pouss√©s sur github. 

Le fichier `.gitignore` vous permet d'identifier les fichiers qui ne doivent pas √™tre vers√©s sur le serveur. 

---

class: inverse, center, middle

# Travail pour la semaine

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

---

# Consignes

- Identifiez clairement vos questions de recherche
- Planifiez les requ√™tes √† r√©aliser pour traiter les donn√©es
- Cr√©ez un d√©p√¥t github pour votre projet 
- Cr√©ez un cahier de laboratoire o√π sont not√©es toutes vos √©tapes
- Versez votre travail sur le d√©p√¥t en ligne
- Construire le `_targets.R` au fur et √† mesure de vos progr√®s

---

# Fiche de lecture

Vous avez √† lire "The FAIR Guiding Principles for scientific data management and stewardship" de Wilkinson (2016) et r√©pondre aux questions suivante en une page maximum √† remettre en PDF avant le cours du 31 mars :

    Quel est l'importance des donn√©es, des m√©tadonn√©es et du code dans crise actuelle de la reproductibilit√© ?
    Pourquoi les principes FAIR ? Quelle est leur pertinence ?
    Quel est le lien entre les principes FAIR et la reproductibilit√© ?

[Wilkinson et al. 2016. The FAIR Guiding Principles for scientific data management and stewardship.](https://github.com/EcoNumUdS/BIO500/blob/master/lectures/wilkinson2016.pdf)

---

class: inverse, center, middle

# D√©bat : Intelligence artificielle et √©cologie, opportunit√© ou menace pour la rigueur scientifique ?

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

&lt;br&gt;
## 15 minutes pour pr√©parer ses arguments
## 2 minutes pour pr√©senter ses arguments
## 20 minutes de discussion dirig√©e
## 5 minutes vote et conclusion
&lt;!-- 
    Sondage sur l‚Äôimpact per√ßu des LLM.
    Conclusion sur les pistes pour une utilisation responsable.
--&gt;

&lt;!-- 
Points de r√©flexion :

  -  Fiabilit√© et biais : Les LLM peuvent-ils introduire des biais dans l'analyse des donn√©es √©cologiques ?
  -  Automatisation et cr√©ativit√© scientifique : Les LLM peuvent-ils renforcer la cr√©ativit√© ou risquent-ils de r√©duire l‚Äôesprit critique ?
  -  Acc√®s aux donn√©es et reproductibilit√© : Les LLM facilitent-ils l‚Äôacc√®s √† des connaissances dispers√©es ou compliquent-ils la transparence des m√©thodes ?
  -  √âthique et impacts environnementaux : L'empreinte carbone des LLM est-elle compatible avec les objectifs de durabilit√© √©cologique ? 

Retour sur r√®gles de l'universit√© de Sherbrooke : 
- Responsabilit√© √©tudiants : https://www.usherbrooke.ca/intranet-education/fileadmin/sites/intranet-education/documents/Intranet/Reglements_facultaires/Informations_facultaires_VF_en_vigueur.pdf
- Lignes directrices : https://www.usherbrooke.ca/decouvrir/a-propos/priorites-institutionnelles/intelligence-artificielle/lignes-directrices-iag
- Biblio : https://libguides.biblio.usherbrooke.ca/IA
--&gt;


class: inverse, center, middle

# Essai sur la reproductibilit√©

&lt;hr width="65%" size="0.3" color="orange" style="margin-top:-20px;"&gt;&lt;/hr&gt;

---

# Objectifs

L'objectif d'un essai est de pr√©senter une perspective sur un enjeu scientifique, appuy√© par une argumentation logique et une lecture critique de la litt√©rature. L'objectif sp√©cifique de ce travail est de formuler et d√©fendre une opinion sur les enjeux de reproductibilit√© en √©cologie.

---

# Mise en situation

Le journal Qu√©bec Science vous a invit√© √† titre de chercheur √† √©crire l'√©ditorial du mois sur cet enjeu. Plus sp√©cifiquement, on vous demande de vous exprimer sur l'importance de la *transparence* et des standards de *reproductibilit√©* dans un contexte o√π il y a une acc√©l√©ration de la recherche par l'utilisation de l'intelligence artificielle. Cette invitation fait suite √† la publication d'un article paru dans le dernier num√©ro du journal :

[ChatGPT en science : alerte √† l‚Äôimposteur!](https://www.quebecscience.qc.ca/edito/chatgpt-science-alerte-imposteur/)

Vous √™tes invit√©s √† faire une lecture critique de la situation actuelle, √† identifier l√† o√π les agents conversationnels utilisant l'intelligence artificielle peuvent aider et √† proposer des mesures qui permettront de r√©pondre aux enjeux actuels.

---

# Attentes

Qu√©bec Science est un journal destin√© √† un grand public, alors je vous invite √† personnaliser votre argumentation et √† rendre original sa pr√©sentation. Vous pouvez utiliser des tableaux, des figures ou encore des encadr√©s pour √©tayer vos propos. Essayez de faire plus que de rapporter les arguments pr√©sent√©s en classe, n'h√©sitez pas √† **personnaliser** votre essai.

---

# Consignes

- Le texte doit faire au maximum 1200 mots et doit √™tre accompagn√© d'un r√©sum√© court, provocateur de 100 mots. Le document peut √™tre support√© par une figure et/ou un tableau.
- L'argumentaire doit √™tre support√© de litt√©rature scientifique appropri√©e. Vous pouvez utiliser les r√©f√©rences discut√©es en classe, celles disponible sur le d√©p√¥t git et vous devez √©galement trouver de **nouvelles r√©f√©rences** pour appuyer vos propos.
- Pour chaque argument (positif ou negatif) amen√©, vous devez en **donner un exemple personnel et concret** prenant place dans le cadre d'un travail scolaire.
- Le texte peut √™tre structur√© en sections afin de permettre au lecteur de suivre le d√©veloppement de l'argumentaire.
- La section finale doit r√©sumer les principaux points.

---

# √âvaluation

- Respect des consignes
- Titre et r√©sum√©
- Formulation de la proposition 
- Qualit√© de l'argumentation
    + Identification de l'apport de l'intelligence artificielle
    + Identification des probl√®mes
    + Proposition de solutions
    + Qualit√© de la mise en contexte personnelle (exemples)
- Originalit√©
- Mise en page
- Bibliographie
- Qualit√© de la langue
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="../assets/macros.js"></script>
<script>var slideshow = remark.create({
  "highlightStyle": "monokai",
  "highlightLines": true,
  "countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
